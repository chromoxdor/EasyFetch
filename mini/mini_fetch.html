<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='44' height='44'%3E%3Crect x='0' y='0' rx='6' ry='6' width='44' height='44' style='fill:%233c3c3b' transform='rotate(0 14 20)'/%3E%3Cg transform='rotate(45 26 23)'%3E%3Crect x='4' y='15' rx='2' ry='2' width='4' height='20' style='fill:%2325a843' /%3E%3Crect x='12' y='7.5' rx='2' ry='2' width='4' height='35' style='fill:%23ffd103'/%3E%3Crect x='20' y='0' rx='2' ry='2' width='4' height='50' style='fill:%23f28d22' /%3E%3Crect x='28' y='7.5' rx='2' ry='2' width='4' height='35' style='fill:%23e9493e'/%3E%3Ccircle cx='41' cy='25' r='5' fill='white' /%3E%3C/g%3E%3C/svg%3E" type="image/svg+xml">
    <title id="unitT"></title>
</head>

<STYLE>
*{box-sizing:border-box;font-family:sans-serif;font-size:12pt;margin:0;padding:0;}body{user-select:none;-webkit-user-select:none;margin:0;background:#e8e8e8;color:#4e4a4a;}#dateV{opacity:0;top:10px;writing-mode:vertical-lr;position:fixed;pointer-events:none;}#openSys:hover #dateV{opacity:1;}#container{display:flex;position:absolute;height:100vh;width:100vw;justify-content:center;}#framie{height:100%;transition:.8s;position:relative;z-index:2;padding-bottom:60px;left:1px;}iframe{width:100%;height:100%;border:0;background:#fff;box-shadow:4px 0 13px -7px #000;}#unitId{padding:1vh;width:110vw;z-index:1;display:flex;position:fixed;transition:.3s ease-out;justify-content:center;}#allList{display:flex;transform:translate3d(0,0,0);grid-row-gap:1vh;margin:auto;padding:5px;transition:.8s ease-out;flex-direction:column;padding-bottom:40px;padding-top:40px;color:#fff;overflow-y:auto}#allList>div>:not(.bigNum){box-shadow:0 0 10px 1px #00000026;}.allExtra{grid-row-gap:.5vh!important;}#bigNumber{display:grid;gap:1vh;transition:.8s ease-out;}.bigNum{display:flex;grid-template-columns:auto auto auto auto;gap:1vh;width:-webkit-fill-available;justify-content:start;transition:.8s ease-out;}.bigNumOne{justify-content:center!important;grid-template-columns:auto!important;width:unset!important;}.bigNumWrap{width:-webkit-fill-available;display:flex;justify-items:stretch;cursor:default;padding:4.2px;border-radius:5px;width:150px;height:75px;flex-direction:column;background:#837c7c;flex-wrap:nowrap;justify-content:space-between;box-shadow:0 0 10px 1px #00000026;}#sensorList{display:grid;gap:1vh;justify-content:center;transition:.8s ease-out;}#sliderList{display:grid;gap:1vh;min-width:288px;transition:.8s ease-out;}#sliderList .sensorset{width:inherit;height:40px;background:#837c7c;}.clickables:active{transform:scale(.95);transition:.1s;}.slider,.slider{background:#847d7d;width:calc(100% + 44.2px);left:-24.2px;top:0;}.noI{pointer-events:none;}.slider::-webkit-slider-thumb{-webkit-appearance:none;width:0;height:50px;cursor:pointer;box-shadow:-100vw 0 0 100vw #458fd1;border-left:20px solid #458fd1;border-right:20px solid #837c7c;}.slider::-moz-range-thumb{width:0;height:70px;cursor:pointer;box-shadow:-100vw 0 0 100vw #458fd1;border-left:20px solid #458fd1;border-right:20px solid #837c7c;}.npH{background-image:linear-gradient(to right,red,yellow,lime,cyan,blue,magenta,red);}.npV{background-image:linear-gradient(to right,#333,white);}.npS{background-image:linear-gradient(to right,white,#333);}.slTS,.thermO{-webkit-appearance:none;position:absolute;height:40px;z-index:1;border-radius:5px;width:100%;top:0;pointer-events:none;}.slTS{mix-blend-mode:overlay;background:#8a8787;}.slTS:hover{background:transparent;}.slTS:nth-child(1)::-webkit-slider-thumb{border-left:10px solid #d25e42;border-right:10px solid #458fd1;}.slTS:nth-child(2)::-webkit-slider-thumb{border-left:10px solid #458fd1;border-right:10px solid #d25e42;}.slTS:nth-child(1)::-moz-range-thumb{border-left:10px solid #d25e42;border-right:10px solid #458fd1;}.slTS:nth-child(2)::-moz-range-thumb{border-left:10px solid #458fd1;border-right:10px solid #d25e42;}.thermO::-webkit-slider-thumb{border:4px solid #d25e42;}.thermO::-moz-range-thumb{border:4px solid #d25e42;}.slTS::-webkit-slider-thumb{width:0;height:40px;box-shadow:0 0 10px 10px #00000026;}.slTS::-moz-range-thumb{width:0;height:100vh;}.slTHU::-moz-range-thumb{cursor:pointer;appearance:none;pointer-events:all;}.slTHU::-webkit-slider-thumb{-webkit-appearance:none;background:none;cursor:pointer;appearance:none;pointer-events:all;}.thermO::-webkit-slider-thumb{width:25px;height:40px;border-radius:5px;box-shadow:0 0 10px 10px #00000026,inset 0 0 5px 2px #00000026;}.thermO::-moz-range-thumb{background:none;width:20px;height:32px;border-radius:5px;box-shadow:0 0 10px 10px #00000026,inset 0 0 5px 2px #00000026;}.slTimeSet{display:flex;align-items:center;justify-content:center;}.slTimeSetWrap{height:40px;padding:4.2px;border-radius:5px;overflow:hidden;position:relative;}.slTimeText,.sliderAmount{position:absolute;right:4.2px;bottom:0;font-weight:400;z-index:2;pointer-events:none;}.thermO{background:none;}.sensorset:not(.btnTile){background:#847d7d;}.sensorset{display:flex;justify-items:stretch;flex-direction:column;padding:4.2px;flex-wrap:nowrap;border-radius:5px;width:150px;overflow:hidden;position:relative;align-items:stretch;cursor:pointer;}.valueBig{font-size:27pt;text-align:right;}.valuesBig{overflow-wrap:anywhere;}.valWrap{background:#635d5d;border-radius:5px;text-align:end;display:flex;align-items:center;justify-content:flex-end;width:100%;}.vInputs{height:30px;width:84%;border:0;background:none;text-align:end;color:inherit;}.vInputs:focus-visible{width:inherit;}.vInputs::placeholder{opacity:1;color:#fff;}vInputs:focus::placeholder{opacity:.2;}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}input[type=number]{-moz-appearance:textfield;}.kindInput{padding:0 2px 0 1px;}.on{background:#3e88cb!important;}.alert{background:#d8524f!important;}.btnTile{background:#635d5d;min-height:60px;}.sensors{padding-bottom:4px;overflow-wrap:anywhere;z-index:2;pointer-events:none;}.row{display:flex;justify-content:space-between;}.odd{padding-right:1px;overflow-wrap:anywhere;}.odd:hover{overflow:visible;}.even{display:flex;word-spacing:-2px;white-space:nowrap;height:20px;align-items:center;justify-content:flex-end;}.cron{padding-bottom:1pt;text-align:end}#opener{bottom:0;z-index:2;width:100%;position:fixed}.open{background:none;display:flex;max-width:200px;align-items:center;margin:auto;padding-bottom:2vh;justify-content:space-between;}.sidenav{height:100%;width:280px;position:fixed;z-index:20;top:0;left:-280px;background:#111111d9;transition:.6s;overflow-y:hidden;display:flex;flex-direction:column;align-items:center;cursor:pointer;justify-content:center;color:#fff;}.menueItem{display:grid;justify-content:start;grid-template-columns:25px auto;align-items:end}.numberUnit{padding-left:2px;font-size:12px;color:#818181}#menueList div:hover{color:#444}.nc{word-break:break-word}.sideNbtn{position:absolute;bottom:2%;font-size:35px;color:#b3b3b3;}#openSys{left:20px;width:40px}#closeBtn{right:20px}#menueList{overflow:scroll;-ms-overflow-style:none;scrollbar-width:none;transition:.2s;width:max-content;max-width:280px;padding:6px}#menueList::-webkit-scrollbar{display:none;}#menueList div{padding:3px;font-size:25px}#sysInfo{background:#ffffff17;color:#fff;transition:.5s;border-radius:5px;width:200px;height:0;overflow:hidden;position:absolute;top:5px;display:flex;flex-direction:column;justify-content:space-evenly}.menueWrap{transition:.5s;height:185px;flex-shrink:999}.bigSpan:nth-child(1){grid-row:1 / span 2;height:100%;}@media screen and (max-height:450px){#framie{padding-bottom:40px}#opener{height:40px}}@media screen and (max-width:799px){#framie{position:absolute}}@media screen and (max-width:450px){#allList{grid-row-gap:5px;min-width:unset}#opener{height:40px}#framie{padding-bottom:40px}.allExtra{grid-row-gap:2.5px!important}#bigNumber{grid-row-gap:5px}#sliderList{gap:5px 1vh}#sensorList{gap:5px}.bigNum{gap:5px}.sensors{padding-bottom:2%}}@media (prefers-color-scheme:dark){body{background:#000;color:#b3b3b3}input::placeholder,#allList{color:#b3b3b3}iframe,.slTimeSetWrap{background:#000}#opener,#unitId{background:#000000a8}.bigNumWrap{background:#444}.slTS{mix-blend-mode:lighten;background:#444!important}.slTS:nth-child(1)::-webkit-slider-thumb{border-left:10px solid #6d1343;border-right:10px solid #44607a}.slTS:nth-child(2)::-webkit-slider-thumb{border-left:10px solid #44607a;border-right:10px solid #6d1343}.slTS:nth-child(1)::-moz-range-thumb{border-left:10px solid #6d1343;border-right:10px solid #44607a}.slTS:nth-child(2)::-moz-range-thumb{border-left:10px solid #44607a;border-right:10px solid #6d1343}.thermO::-webkit-slider-thumb{border:4px solid #882c29}.thermO::-moz-range-thumb{border:4px solid #882c29}.slider{background:#444}.slider::-webkit-slider-thumb{box-shadow:-100vw 0 0 100vw #44607a;border-left:20px solid #44607a;border-right:20px solid #444}.slider::-moz-range-thumb{box-shadow:-100vw 0 0 100vw #44607a;border-left:20px solid #44607a;border-right:20px solid #444}.npS,.npH,.npV{background-color:#9b9b9b;background-blend-mode:multiply}.on{background:#44607a!important}.alert{background:#553044!important}.valueBig{background:none}.btnTile,.valWrap{background:#333}.sensorset:not(.btnTile),#sliderList .sensorset{background:#444}}
</STYLE>

<body onload="fetchJson()">
    <script>
var jsonPath,nNr,nP,nP2,nN,unitNr,unitNr1,fJ,nIV,iIV,navOpen,myParam,currVal,html,manNav,gesVal,iO,initIP,firstRun=1,bigLength=0,hasParams=1,isittime=1,tsX=0,teX=0,tsY=0,teY=0,msTs=0,msTe=0;const cmD="control?cmd=";var coloumnSet,myJson;async function fetchJson(){if(!isittime)return;let e=new URLSearchParams(window.location.search);if(myParam=e.get("unit"),"reboot"==e.get("cmd")&&(window.location.href=window.location.origin+"/tools?cmd=reboot"),null==myParam&&(hasParams=0),someoneEn=0,!isittime)return;if(jsonPath||(jsonPath="/json"),responseTime=Date.now(),response=await getUrl(jsonPath),myJson=await response.json(),!isittime)return;html="";let t="",n="",s="";if(unit=myJson.WiFi.Hostname,unitNr=myJson.System["Unit Number"],sysInfo=myJson.System,myJson.Sensors.length){const[,e]=getComputedStyle(document.body).backgroundColor.match(/\d+/g);for(const o of myJson.Sensors){var i="";sensorName=o.TaskName,sensorName.includes("?")?(tBG=`background:#${sensorName.split("?")[1]}${"0"===e?"80":""}`,sensorName=sensorName.split("?")[0]):tBG="";var l=changeNN(sensorName);const a='sensorset clickables" onclick="playSound(3000), ',r=`<div id="${sensorName}" class="sensors" style="font-weight:bold;">${l}</div>`;if(exC=[87,38,41,42].includes(o.TaskDeviceNumber),exC2=!o.Type?.includes("Display"),taskEnabled=o.TaskEnabled.toString(),"true"===taskEnabled&&!sensorName.includes("XX")&&!exC&&exC2&&!hasParams)if(o.TaskValues){someoneEn=1,firstItem=!0;for(const e of o.TaskValues){wasUsed=!1,"nan"==e.Value&&(e.Value=0,e.NrDecimals=0),"number"==typeof e.Value?num2Value=e.Value.toFixed(e.NrDecimals):num2Value=e.Value,iN=e.Name.toString();let l=iN.endsWith("XI")?" noI ":"";if(iN=l?iN.slice(0,-2):iN,itemN=iN.split("?")[0],kindN=iN.split("?")[1],kindN||(kindN=""),"H"==kindN&&(kindN="%"),"T"==kindN&&(num2Value=num2Value.toString(),num2Value=num2Value.replace(".",":"),4==e.NrDecimals&&(num2Value=num2Value.replace(/(.*)(.)(.)/,"$1.$2$3")),kindN=""),bS="",1==o.TaskDeviceNumber)if(wasUsed=!0,"btnStateC"===iN&&e.Value<2||1===e.Value?bS="on":2===e.Value&&(bS="alert"),!o.TaskDeviceGPIO1||"State"!==iN&&"iState"!==iN)if("pState"===iN&&o.TaskDeviceGPIO1){const e=`${sensorName}?${o.TaskDeviceGPIO1}`;html+=`<div class="${bS} btnTile push sensorset" onpointerdown="playSound(3000), pushClick('${e}',1)" onpointerup="pushClick('${e}',0)"><div id="${sensorName}" class="sensors" style="font-weight:bold;">${sensorName}</div></div>`}else itemN.includes("btnState")?("ibtnState"===itemN&&(e.Value=1==e.Value?0:1),kindN&&(sensorName=`${sensorName}|${kindN}`),html+=`<div id="${sensorName}" class="btnTile ${l} ${bS} ${a}buttonClick('${sensorName}', '${e.Value}')">${r}`):wasUsed=!1;else{"iState"===iN&&(e.Value=1==e.Value?0:1);const t=`${sensorName}|${o.TaskDeviceGPIO1}`;html+=`<div class="btnTile ${bS} ${a} ${l}buttonClick('${t}', '${e.Value}')">${r}`}if(33==o.TaskDeviceNumber&&!iN.includes("XX")&&!sensorName.includes("bigVal"))if(wasUsed=!0,"C"===kindN&&e.Value<2||1===e.Value?bS="on":2===e.Value&&(bS="alert"),["dButtons","vInput","pButtons"].some((e=>o.TaskName.includes(e)))&&e.Name.includes("noVal")){(!e.Name.includes("noValAuto")||window.innerWidth>=450&&document.cookie.includes("Two=1"))&&(html+='<div class="sensorset btnTile"></div>')}else if(sensorName.includes("dButtons")){if(e.Value>-1){itemNB=itemN.split("&")[0],itemNB2=changeNN(itemNB);const[e,t]=itemN.split("&")[1]?.split("G")||[],n="A"===e?`getNodes('${itemNB}')`:`buttonClick('${itemN}')`;html+=`<div class="btnTile ${l} ${bS} ${a} ${n}"><div id="${itemNB}" class="sensors ${"A"===e?"nodes":""}" style="font-weight:bold;">${itemNB2}</div></div>`}}else if(sensorName.includes("vInput"))itemN=itemN||"&nbsp;",itemNB2=changeNN(itemN),html+=`\n                                        <div class="sensorset clickables">\n                                            <div id="${itemN}" class="sensors" style="font-weight:bold;pointer-events:all" onclick="getInput(this.nextElementSibling.firstElementChild)">\n                                                ${itemNB2}\n                                            </div>\n                                            <div class="valWrap">\n                                                <input type="number" class="vInputs ${o.TaskNumber},${e.ValueNumber}" id="${itemN}" name="${sensorName}" placeholder="${num2Value}" onkeydown="getInput(this)" onclick="getInput(this,1)">\n                                                <div class="kindInput">${kindN}</div>\n                                            </div>\n                                        </div>`;else if(sensorName.includes("vSlider")){let{slName:t,slMin:s,slMax:i,slStep:a,slKind:r}=parseSliderData(iN,"sl");t=changeNN(t),num2Value=Number(num2Value).toFixed((a.toString().split(".")[1]||"").length),t="noVal"===t?"&nbsp;":t,r="H"===r?"%":r||"",n+=`<div class="sensorset ${l}"><input type="range" min="${s}" max="${i}" step="${a}" value="${num2Value}" id="${iN}" class="slider sL ${o.TaskNumber},${e.ValueNumber}`,n+=sensorName.includes("nvSlider")?` noVal"><div class="sensors" style="align-items: flex-end;"><div style="font-weight:bold;">${t}</div></div></div>`:`"><div class="sensors" style="align-items: flex-end;"><div style="font-weight:bold;">${t}</div><div class="sliderAmount" style="text-align: right;">${num2Value}${r}</div></div></div>`}else if(sensorName.includes("tSlider")){4!==e.NrDecimals&&(iN="For the Time slider the value must have<br>4 decimals!"),slT1=e.Value.toFixed(4),slT2=(slT1+"").split(".")[1],slT1=Math.floor(slT1),hour1=Math.floor(slT1/60),minute1=slT1%60;const t=minute1.toString().padStart(2,"0");hour2=Math.floor(slT2/60),minute2=slT2%60;const s=minute2.toString().padStart(2,"0");iN=changeNN(iN),htmlSlider1='<input class="slTS slTHU" type="range" min="0" max="1440" step="5" value="',n+='<div id="'+iN+'" class="slTimeSetWrap '+sensorName+" "+o.TaskNumber+","+e.ValueNumber+'" style="font-weight:bold;">'+iN+'<div class="slTimeText"> <span class="hAmount1">'+hour1+'</span><span>:</span><span class="mAmount1">'+t+'</span><span>-</span><span class="hAmount2">'+hour2+'</span><span>:</span><span class="mAmount2">'+s+'</span></div><div class="slTimeSet">'+htmlSlider1+slT1+'" id="'+iN+'L">'+htmlSlider1+slT2+'" id="'+iN+'R"></div></div>'}else if(sensorName.includes("thermoSlider")){3!==e.NrDecimals&&(iN="For the Time slider the value must have<br>3 decimals!");let{slName:t,slMin:s,slMax:i,slStep:a}=parseSliderData(iN,"th");t=changeNN(t),slT1=e.Value.toFixed(3),slT2=100*(slT1-Math.floor(slT1)),slT2=slT2.toFixed(1),slT1=(Math.floor(slT1)/10).toFixed(1),Math.floor(slT1)<10&&(slT1="&nbsp;"+slT1.toString()),htmlSlider1='type="range" min="'+s+'" max="'+i+'"  step="'+a+'" value="',thermoSliderAddon='<div class="noI" style="z-index: 2; position: absolute">'+t+"</div>",n+='<div id="'+t+'" class="slTimeSetWrap '+sensorName+" "+o.TaskNumber+","+e.ValueNumber+'" style="font-weight:bold;">'+thermoSliderAddon+'<div class="slTimeText"> <div class="even">&#9728;&#xFE0E;<span class="isT"> '+slT1+'</span>°C</div><div class="even">&#9737;&#xFE0E;<span class="setT"> '+slT2+'</span>°C</div></div><div class="slTimeSet"><input class="slTHU thermO '+l+'" '+htmlSlider1+slT2+'" id="setpoint"><input class="slider noI thT" '+htmlSlider1+slT1+'" id="'+t+'"></div></div>'}else wasUsed=!1;if(sensorName.includes("bigVal")){wasUsed=!0;let e='<div class="valuesBig" style="font-weight:bold;text-align:left;">';firstItem&&(s+='<div class="bigNum">',bigLength=Math.max(bigLength,o.TaskValues.length));let t=`<div style="${tBG}" class="bigNumWrap `;if(!iN.includes("XX")){3!==o.TaskValues.length||o.TaskValues.some((e=>"XX"===iN))||(window.innerWidth<450||document.cookie.includes("Two=1"))&&(i="bigSpan"),s+=t+i+'">';iN;iN.includes("noVal")?s+=`${e}</div><div class="valueBig"></span></div></div>`:(itemN=changeNN(itemN),s+=`${e}${itemN}</div><div class="valueBig">${num2Value}<span style="background:none;padding-right: 1%;">${kindN}</span></div></div>`)}}wasUsed||(43==o.TaskDeviceNumber?firstItem&&(1===e.Value&&(bS="on"),html+='<div class="btnTile '+bS+' sensorset clickables" onclick="playSound(3000); splitOn('+o.TaskNumber+'); topF()""><div class="sensors" style="font-weight:bold;">'+sensorName+'</div><div class=even style="font-size: 20pt;">&#x23F2;&#xFE0E;</div></div></div>'):(!0===firstItem&&(t+=`<div class="${a}buttonClick('${sensorName}')" style="${tBG}">${r}`),e.Name.toString().includes("XX")||(81==o.TaskDeviceNumber?t+='<div class="cron"><div>'+itemN+'</div><div style="font-size: 10pt;">'+e.Value+"</div></div>":t+="<div class=row><div class=odd>"+itemN+"</div><div class=even>"+num2Value+" "+kindN+"</div></div>"))),firstItem=!1}html+="</div>",t+="</div>",s+="</div>",document.cookie.includes("Sort=1")||(html+=t,t="")}else t+='<div  class="sensorset clickables" onclick="buttonClick(\''+sensorName+'\')"><div class="sensors" style="font-weight:bold;">'+sensorName+"</div><div></div><div></div></div>",someoneEn=1,document.getElementById("sensorList").innerHTML=html}someoneEn||hasParams||(html+='<div class="sensorset clickables" onclick="splitOn(); topF()"> <div class="sensors" style="font-weight:bold;">no tasks enabled or visible...</div>')}else html+='<div class="sensorset clickables"><div  class="sensors" style="font-weight:bold;">no tasks configured...</div>';html+=t,document.getElementById("sysInfo").innerHTML=syshtml,document.getElementById("sensorList").innerHTML=html,document.getElementById("sliderList").innerHTML=n,document.getElementById("bigNumber").innerHTML=s,firstRun&&(document.cookie.includes("Snd=")||mC("Snd"),/iPhone/i.test(window.navigator.userAgent)&&(document.body.style.height="100vh"),fJ=setInterval(fetchJson,2e3),unitNr1=myJson.System["Unit Number"],initIP="(IP unset)"===myJson.WiFi["IP Address"]?"192.168.4.1":myJson.WiFi["IP Address"],nP2=`http://${initIP}/devices`,nP=`http://${initIP}/tools`,getNodes(),longPressS(),longPressN(),addEonce(),firstRun=!1),styleU=unitNr===unitNr1?"&#8858;&#xFE0E;":"",hasParams||(document.getElementById("unitId").innerHTML=`${styleU}${unit} <span class="numberUnit"> (${myJson.WiFi.RSSI})</span>`,document.getElementById("unitT").innerHTML=`${styleU}${unit}`),paramS(),changeCss(),resizeText(),longPressB()}function parseSliderData(e,t){let n,s,i,l,o;return(e.match(/\?/g)||[]).length>=3?([n,s,i,l,o]=e.split("?"),"m"===s.charAt(0)&&(s="-"+s.slice(1)),"m"===i.charAt(0)&&(i="-"+i.slice(1))):(n=e,"th"===t?(s=5,i=35,l=.5):(s=0,i=1024,l=1)),{slName:n,slMin:s,slMax:i,slStep:l,slKind:o}}function changeNN(e){return e.replace(/_/g," ").replace(/\./g,"<br>")}function changeCss(){let e,t,n,s="auto ",i="";document.querySelectorAll("input[type=range]").length?document.getElementById("allList").classList.remove("allExtra"):document.getElementById("allList").classList.add("allExtra");var l=document.querySelectorAll(".bigNum"),o=document.getElementById("sensorList"),a=o.getElementsByClassName("sensorset").length;if(n=0,l.length||(n=a),4==bigLength||n>9)t=s+s+s+s,e=4;else if(3==bigLength||n>4)t=s+s+s,e=3;else if(2==bigLength||n>1)t=s+s,e=2;else if(1==bigLength||n<2){if(t=s,i="important",l.length)for(let e=0;e<l.length;++e)l[e].classList.add("bigNumOne");e=1}else t=s+s,e=2;if(widthLimit=150*e+e*(window.innerHeight/100),window.innerWidth<widthLimit||document.cookie.includes("Two=1")){if(l.length)for(let e=0;e<l.length;++e)l[e].style.cssText="display: grid; grid-template-columns: auto auto;";1==bigLength||0==bigLength&&1==a?(e=1,t=s,i="!important"):(e=2,t=s+s)}if(o.style.cssText=`grid-template-columns: ${t} ${i};`,a%e!=0&&1!=e){calcTile=e-(a-e*Math.floor(a/e));for(let e=1;e<=calcTile;e++)html+='<div class="sensorset"></div>'}document.getElementById("sensorList").innerHTML=html,bigLength=0}function paramS(){document.querySelectorAll(".slTHU").forEach((e=>{e.addEventListener("input",updateSlTS),e.addEventListener("change",sliderChTS),e.addEventListener("pointerup",(e=>{iIV=setTimeout(blurInput,1e3)}))})),document.querySelectorAll(".sL").forEach((e=>{e.addEventListener("input",updateSlider),e.addEventListener("change",sliderChange),e.addEventListener("pointerup",(e=>{iIV=setTimeout(blurInput,1e3)}))})),neoS=document.querySelectorAll(".npS"),neoS.forEach((e=>{hVal=document.getElementById(e.id.split("?")[0]+"?H")?.value,vVal=document.getElementById(e.id.split("?")[0]+"?V")?.value||20,vVal<20&&(vVal=20),e.style.backgroundImage="linear-gradient(to right, hsl(0,0%,"+vVal+"%),hsl("+hVal+",100%,50%))"}))}function addEonce(){document.addEventListener("touchstart",(e=>{msTs=Date.now(),tsX=e.changedTouches[0].screenX,tsY=e.changedTouches[0].screenY})),document.addEventListener("touchend",(e=>{msTe=Date.now(),teX=e.changedTouches[0].screenX,teY=e.changedTouches[0].screenY,checkDirection()})),document.addEventListener("mousemove",(e=>{manNav||navOpen||e.clientX<10&&-280===document.getElementById("mySidenav").offsetLeft&&openNav()})),document.getElementById("mySidenav").addEventListener("mouseleave",(e=>{manNav||closeNav()}))}function checkDirection(){touchtime=msTe-msTs,touchDistX=teX-tsX,touchDistY=teY-tsY,teX<tsX&&navOpen&&Math.abs(touchDistX)>40&&Math.abs(touchDistY)<30&&touchtime<250&&closeNav(),teX>tsX&&!navOpen&&Math.abs(touchDistX)>40&&Math.abs(touchDistY)<30&&touchtime<250&&openNav()}function updateSlTS(e){isittime=0;const t=e.target,n="setpoint"===t.id,s=t.closest(".slTimeSetWrap");if(n){return void(s.querySelector(".slTimeText .setT").textContent=Number(t.value).toFixed(1))}const i="L"===t.id.slice(-1)?1:2,l=s.querySelector(`.hAmount${i}`),o=s.querySelector(`.mAmount${i}`),a=Math.floor(t.value/60),r=t.value%60;l.textContent=a,o.textContent=r.toString().padStart(2,"0")}function updateSlider(e){isittime=0;const t=e.target;t.attributes.value.nodeValue;let n=t.id.split("?")[4]||"";if(!t.className.includes("noVal")){const e=t.closest("div.sensorset").querySelector(".sliderAmount");"H"===n&&(n="%");const s=t.step.includes(".")?t.step.split(".")[1].length:0,i=Number(t.value).toFixed(s)+n;e.textContent=i}}function sliderChTS(e){playSound(4e3);const t=e.target,n=t.parentNode.parentNode,s=t.id,i=n.classList[2],l=n.classList[1],o=e.target.value;if("setpoint"===s){const e=`taskvalueset,${i},${10*parseFloat(t.closest(".slTimeSetWrap").querySelector(".isT").textContent)+o/100}`,s=`event,${n.id}Event=${10*o}`;unitNr===unitNr1?(getUrl(`${cmD}${e}`),getUrl(`${cmD}${s}`)):(getUrl(`${cmD}SendTo,${nNr},"${e}"`),getUrl(`${cmD}SendTo,${nNr},"${s}"`))}else{const e=s===`${n.id}L`,t=document.getElementById(e?`${n.id}R`:`${n.id}L`).value,a=t.toString().padStart(4,"0"),r=`taskvalueset,${i},${e?`${o}.${a}`:`${t}.${o.toString().padStart(4,"0")}`}`,c=`event,${l}Event=${i.split(",")[1]}`;unitNr===unitNr1?(getUrl(`${cmD}"${r}"`),getUrl(`${cmD}"${c}"`)):(getUrl(`${cmD}SendTo,${nNr},"${r}"`),getUrl(`${cmD}SendTo,${nNr},"${c}"`))}}function sliderChange(e){playSound(4e3);const t=e.target;let n=t.value;const s="npSl"===t.classList[1],i=(t.id.match(/\?/g)||[]).length>=3||"npSl"==t.classList[1]?t.id.split("?")[0]:t.id;gesVal&&(gesVal=gesVal.filter(Boolean));const l=`taskvalueset,${t.classList[2]},${n}`,o=s?`event,${i}Event=${gesVal}`:`event,${i}Event=${n}`;unitNr===unitNr1?(getUrl(`${cmD}${l}`),getUrl(`${cmD}${o}`)):(getUrl(`${cmD}SendTo,${nNr},"${l}"`),getUrl(`${cmD}SendTo,${nNr},"${o}"`))}function buttonClick(e,t){if(e.includes("&")){const[t,n]=e.split("&"),[s,i]=n.split("G"),l=i&&!i.endsWith("L");getUrl(unitNr==s?l?`${cmD}GPIOToggle,${i}`:`${cmD}"event,${t}Event"`:l?`${cmD}SendTo,${s},"GPIOToggle,${i}"`:`${cmD}SendTo,${s},"event,${t}Event"`)}else if(e.includes("|")){const[n,s]=e.split("|");unitNr===unitNr1?(getUrl(`${cmD}gpio,${s},${1-t}`),getUrl(`${cmD}event,${n}Event`)):(getUrl(`${cmD}SendTo,${nNr},"gpio,${s},${1-t}"`),getUrl(`${cmD}SendTo,${nNr},"event,${n}Event"`))}else{const t=`event,${e}Event`;getUrl(unitNr===unitNr1?`${cmD}"${t}"`:`${cmD}SendTo,${nNr},"${t}"`)}setTimeout(fetchJson,400)}function getInput(e,t){if("click"===event.type&&(isittime=0,iIV=setTimeout(blurInput,8e3),e.addEventListener("blur",(e=>{clearTimeout(iIV),isittime=1,setTimeout(fetchJson,400)}))),e.value.length>12&&(e.value=e.value.slice(0,12)),"Enter"===event.key||"click"===event.type&&!t){if(isittime=1,e.value){playSound(4e3);const t=`taskvalueset,${e.classList[1]},${e.value}`;getUrl(unitNr===unitNr1?t:`${cmD}SendTo,${nNr},"${t}"`),buttonClick(e.id)}else setTimeout(fetchJson,400);clearTimeout(iIV)}else"Escape"===event.key?document.getElementById(e.id).value="":(clearTimeout(iIV),iIV=setTimeout(blurInput,5e3))}function blurInput(){isittime=1}function openNav(e){navOpen=1,e&&(manNav=1),clearInterval(nIV),nIV=setInterval(getNodes,2e3);const t=document.getElementById("mySidenav");-280===t.offsetLeft?(getNodes(),t.style.left="0"):closeNav()}function closeNav(){manNav=0,navOpen=0,clearInterval(nIV),document.getElementById("mySidenav").style.left="-280px"}function openSys(){0===document.getElementById("sysInfo").offsetHeight?(document.getElementById("menueWrap1").style.flexShrink="0",document.getElementById("sysInfo").style.height="180px"):(document.getElementById("sysInfo").style.height="0",document.getElementById("menueWrap1").style.flexShrink="999")}async function getNodes(e,t){let n="",s=-1;if(myJson.nodes.forEach((i=>{if(s++,i.nr==myParam&&hasParams&&(nodeChange(s),hasParams=0),styleN=i.nr===unitNr1?i.nr===unitNr?"&#8857;&#xFE0E;":"&#8858;&#xFE0E;":i.nr===unitNr?"&#183;&#xFE0E;":"",n+=`\n            <div class="menueItem">\n                <div class="serverUnit" style="text-align: center;">${styleN}</div>\n                <div id="${i.name}" class="nc" onclick="nodeChange(${s});iFr();">${i.name}<span class="numberUnit">${i.nr}</span>\n                </div>\n            </div>`,e||t){const n=t?"Long":"Event";getUrl(i.nr===unitNr1?`${cmD}event,${e}${n}`:`${cmD}SendTo,${i.nr},"event,${e}${n}"`)}})),s=0,document.getElementById("menueList").innerHTML=n,hasParams){let e='<div class="sensorset clickables"><div  class="sensors" style="font-weight:bold;">can not find node # '+myParam+"...</div></div>";document.getElementById("sensorList").innerHTML=e,hasParams=0,setTimeout(fetchJson,3e3)}else nIV||setTimeout(fetchJson,1e3)}function nodeChange(e){const t=myJson.nodes[e];if(t){nNr=t.nr,nN=t.name;const e=`http://${t.ip}`;nP=`${e}/tools`,nP2=`${e}/devices`,jsonPath=`${e}/json`,window.history.replaceState(null,null,`?unit=${nNr}`),fetchJson()}window.innerWidth<450&&0===document.getElementById("sysInfo").offsetHeight&&closeNav()}function resizeText(){const e=({clientWidth:e,clientHeight:t,scrollWidth:n,scrollHeight:s})=>n>e||s>t;(({element:t,elements:n,minSize:s=10,maxSize:i=115,step:l=1,unit:o="pt"})=>{(n||[t]).forEach((t=>{let n=s,a=!1;const r=t.parentNode;for(;!a&&n<i;)t.style.fontSize=`${n}${o}`,a=e(r),a||(n+=l);t.style.fontSize=`${n-l-1}${o}`,t.style.lineHeight="0.75"}))})({elements:document.querySelectorAll(".valueBig"),step:1})}function launchFs(e){e.requestFullscreen()}function splitOn(e){const t=document.getElementById("framie");0===t.offsetWidth?(iO=1,iFr(e),t.style.width="100%"):(iO=0,t.style.width=0,t.innerHTML=""),setTimeout(fetchJson,100)}function iFr(e){if(iO){const t=e?`${nP2}?index=${e}&page=1`:nP2;document.getElementById("framie").innerHTML=`<iframe src="${t}"></iframe>`,closeNav()}}function topF(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function longPressN(){document.getElementById("mOpen").addEventListener("long-press",(function(e){window.location.href=nP}))}function longPressS(){document.body.addEventListener("long-press",(function(e){e.preventDefault();const t={closeBtn:"Snd",nOpen:"Sort",openSys:"Two",unitId:"Col"};t[e.target.id]&&mC(t[e.target.id])}))}function mC(e){const t=1==(document.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`)?.pop()||"");playSound(t?500:900),document.cookie=`${e}=${t?0:1}; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/; SameSite=Lax;`}function longPressB(){document.querySelectorAll(".clickables").forEach((e=>{e.addEventListener("long-press",(async function(t){t.preventDefault();const n=e.querySelector(".sensors"),s=e.querySelector(".nodes");let i;if(s)getNodes(s.textContent,"1");else{const[e,t]=n.id.split("&"),s=n.id.split(">")[1];i=t?s&&s.endsWith("L")?`${cmD}SendTo,${t},"GPIOToggle,${s.split("L")[0]}"`:`${cmD}SendTo,${t},"event,${e}Long"`:unitNr===unitNr1?`${cmD}event,${n.id}Long`:`${cmD}SendTo,${nNr},"event,${n.id}Long"`,await getUrl(i),setTimeout(fetchJson,400)}playSound(1e3),isittime=0,iIV=setTimeout(blurInput,600)}))}))}function playSound(e){500===e?receiveNote("R"):e>=900&&e<=1e3?receiveNote("B"):e>1e3&&receiveNote("G"),(document.cookie.includes("Snd=1")||e<1e3)&&(isittime||3e3!==e)&&(c=new AudioContext,o=c.createOscillator(),g=c.createGain(),frequency=e,o.frequency.value=frequency,o.type="sawtooth",o.connect(g),g.connect(c.destination),g.gain.setValueAtTime(.05,0),o.start(0),g.gain.exponentialRampToValueAtTime(1e-5,c.currentTime+.01),o.stop(c.currentTime+.01))}async function getUrl(e){let t=new AbortController;setTimeout((()=>t.abort()),2e3);try{response=await fetch(e,{signal:t.signal})}catch{receiveNote("R")}return response}function receiveNote(e){const t={G:"rgb(0, 255, 0)",B:"rgb(255, 251, 0)",R:"rgb(255, 0, 0)",N:"none"};document.getElementById("unitId").style.boxShadow=0===e||"N"===e?t.N:"inset 0px 11px 17px -11px "+t[e],e&&setTimeout((()=>receiveNote(0)),300)}document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState?(clearTimeout(fJ),fetchJson(),fJ=setInterval(fetchJson,2e3)):clearTimeout(fJ)})),function(e,t){"use strict";let n=null;let s={x:0,y:0};const i="ontouchstart"in e||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,l="PointerEvent"in e||e.navigator&&"msPointerEnabled"in e.navigator?{down:"pointerdown",up:"pointerup",move:"pointermove",leave:"pointerleave"}:i?{down:"touchstart",up:"touchend",move:"touchmove",leave:"touchleave"}:{down:"mousedown",up:"mouseup",move:"mousemove",leave:"mouseleave"};"function"!=typeof e.CustomEvent&&(e.CustomEvent=function(e,n={bubbles:!1,cancelable:!1,detail:void 0}){const s=t.createEvent("CustomEvent");return s.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),s},e.CustomEvent.prototype=e.Event.prototype);const o=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||(t=>e.setTimeout(t,1e3/60));function a(e){d();const n=r(e),s=new CustomEvent("long-press",{bubbles:!0,cancelable:!0,detail:(i=n,{clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY})});var i;this.dispatchEvent(s)||t.addEventListener("click",u,!0)}function r(e){return e.changedTouches?e.changedTouches[0]:e}function c(s){d();const i=s.target,l=parseInt(function(e,n,s){for(;e&&e!==t.documentElement;){const t=e.getAttribute("data-long-press-delay");if(t)return t;e=e.parentNode}return"1000"}(i),10);n=function(t,n){if(!o)return e.setTimeout(t,n);const s=(new Date).getTime(),i={},l=()=>{(new Date).getTime()-s>=n?t():i.value=o(l)};return i.value=o(l),i}(a.bind(i,s),l)}function d(){var t;(t=n)&&(e.cancelAnimationFrame||e.clearTimeout)(t.value),n=null}function u(e){t.removeEventListener("click",u,!0),e.preventDefault(),e.stopImmediatePropagation()}t.addEventListener(l.down,(function(e){const t=r(e);s={x:t.clientX,y:t.clientY},c(e)}),!0),t.addEventListener(l.move,(function(e){const t=r(e);(Math.abs(s.x-t.clientX)>10||Math.abs(s.y-t.clientY)>10)&&d()}),!0),t.addEventListener(l.up,d,!0),t.addEventListener(l.leave,d,!0),t.addEventListener("wheel",d,!0),t.addEventListener("scroll",d,!0),navigator.userAgent.toLowerCase().includes("android")||t.addEventListener("contextmenu",d,!0)}(window,document);
</script>

<div id="container">
    <div id="framie"></div>
    <div id="mySidenav" class="sidenav">
        <div id="sysInfo">no info found...</div>
        <div class="menueWrap" id="menueWrap1"></div>
        <div id="menueList"></div>
        <div class="menueWrap" id="menueWrap2"></div>
        <div class="sideNbtn" id="openSys" onclick="openSys()">
            <div id="dateV">20250131/mini1</div>&#8505;&#xFE0E;
        </div>
        <div class="sideNbtn" id="closeBtn" onclick="closeNav()">&times;&#xFE0E;</div>
    </div>
    <div id="unitId" style="cursor: pointer;" onclick="launchFs(document.documentElement)">&nbsp;</div>
    <div id="allList">
        <noscript>JavaScript is disabled!</noscript>
        <div id="bigNumber"></div>
        <div id="sliderList"></div>
        <div id="sensorList"></div>
    </div>
    <div id="opener">
        <div class="open">
            <span id="nOpen" style="font-size:30px;cursor:pointer;background:none;"
                onclick="openNav(event)">&#9776;&#xFE0E;</span>
            <span id="mOpen" style="font-size:30px;cursor:pointer;background:none;"
                onclick="splitOn(); topF()">&#8962;&#xFE0E;</span>
        </div>
    </div>
</div>
</body>
</html>