<!DOCTYPE html>
<html lang='en'>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset='utf-8' />
    <link rel="icon"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='44' height='44'%3E%3Crect x='0' y='0' rx='6' ry='6' width='44' height='44' style='fill:%233c3c3b' transform='rotate(0 14 20)'/%3E%3Cg transform='rotate(45 26 23)'%3E%3Crect x='4' y='15' rx='2' ry='2' width='4' height='20' style='fill:%2325a843' /%3E%3Crect x='12' y='7.5' rx='2' ry='2' width='4' height='35' style='fill:%23ffd103'/%3E%3Crect x='20' y='0' rx='2' ry='2' width='4' height='50' style='fill:%23f28d22' /%3E%3Crect x='28' y='7.5' rx='2' ry='2' width='4' height='35' style='fill:%23e9493e'/%3E%3Ccircle cx='41' cy='25' r='5' fill='white' /%3E%3C/g%3E%3C/svg%3E"
        type="image/svg+xml">
    <title id="unitT"></title>
</head>
<STYLE>
*{box-sizing:border-box;font-family:sans-serif;font-size:12pt;margin:0;padding:0;}body{user-select:none;-webkit-user-select:none;margin:0;background:#e8e8e8;color:#4e4a4a;}#dateV{opacity:0;top:10px;writing-mode:vertical-lr;position:fixed;pointer-events:none;}#openSys:hover #dateV{opacity:1;}#container{display:flex;position:absolute;height:100vh;width:100vw;justify-content:center;}#framie{height:100%;transition:.8s;position:relative;z-index:2;padding-bottom:60px;left:1px;}iframe{width:100%;height:100%;border:0;background-color:white;box-shadow:4px 0 13px -7px #000000;}#unitId{top:2%;z-index:1;display:flex;position:fixed;}#allList{display:flex;transform:translate3d(0,0,0);grid-row-gap:1vh;margin:auto;padding:5px;transition:.8s ease-out;flex-direction:column;padding-bottom:40px;padding-top:40px;color:white;}#allList>div>*:not(.bigNum){box-shadow:0 0 10px 1px rgb(0 0 0 / 15%);}.allExtra{grid-row-gap:.5vh!important;}#bigNumber{display:grid;grid-column-gap:1vh;grid-row-gap:1vh;transition:.8s ease-out;}.bigNum{display:flex;grid-template-columns:auto auto auto auto;grid-row-gap:1vh;grid-column-gap:1vh;width:-webkit-fill-available;justify-content:start;transition:.8s ease-out;}.bigNumOne{justify-content:center!important;grid-template-columns:auto!important;width:unset!important;}.bigNumWrap{width:-webkit-fill-available;display:flex;justify-items:stretch;cursor:default;padding:4.2px;border-radius:5px;width:150px;height:75px;flex-direction:column;background:#837c7c;flex-wrap:nowrap;justify-content:space-between;box-shadow:0 0 10px 1px rgb(0 0 0 / 15%);}.bigC{background:#009c63;}#sensorList{display:grid;grid-column-gap:1vh;grid-row-gap:1vh;justify-content:center;transition:.8s ease-out;}#sliderList{display:grid;grid-column-gap:1vh;grid-row-gap:1vh;min-width:288px;transition:.8s ease-out;}#sliderList .sensorset{width:inherit;height:40px;background:#837c7c;}#sensorList .sensorset{min-height:60px;}.clickables:active,.push:active{transform:scale(.95);-webkit-transform:scale(.95);transition:.1s}.slider,.npSl{-webkit-appearance:none;position:absolute;height:inherit;}.slider{mix-blend-mode:color;background:#847d7d;width:calc(100% + 44.2px);left:-24.2px;}.npSl{width:100%;left:-.2px;position:inherit;height:40px;overflow:hidden;border-radius:5px;}.sliderAmount{margin-top:-4px;}.slider::-webkit-slider-thumb{-webkit-appearance:none;width:0;height:50px;cursor:pointer;box-shadow:-100vw 0 0 100vw #458fd1;border-left:20px solid #458fd1;border-right:20px solid #837c7c;}.slider::-moz-range-thumb{width:0;height:70px;cursor:pointer;box-shadow:-100vw 0 0 100vw #458fd1;border-left:20px solid #458fd1;border-right:20px solid #837c7c;}.npSl::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:42px;cursor:pointer;box-shadow:0 0 2px 0 #ffffff;background:#3e88cb;}.npSl::-moz-range-thumb{width:20px;height:42px;cursor:pointer;box-shadow:0 0 2px 0 #ffffff;background:#3e88cb;border:0;}.npH{background-image:linear-gradient(to right,red,yellow,lime,cyan,blue,magenta,red);}.npV{background-image:linear-gradient(to right,#333,white);}.npS{background-image:linear-gradient(to right,white,#333);}.slTS{-webkit-appearance:none;position:absolute;height:40px;z-index:1;border-radius:5px;width:100%;top:0;mix-blend-mode:overlay;pointer-events:none;background-color:#8a8787;}.slTS:hover{background-color:transparent;}.slTS:nth-child(1)::-webkit-slider-thumb{border-left:10px solid #d25e42;border-right:10px solid #458fd1;}.slTS:nth-child(2)::-webkit-slider-thumb{border-left:10px solid #458fd1;border-right:10px solid #d25e42;}.slTS:nth-child(1)::-moz-range-thumb{border-left:10px solid #d25e42;border-right:10px solid #458fd1;}.slTS:nth-child(2)::-moz-range-thumb{border-left:10px solid #458fd1;border-right:10px solid #d25e42;}.slTS::-webkit-slider-thumb{-webkit-appearance:none;width:0;height:40px;cursor:pointer;appearance:none;pointer-events:all;}.slTS::-moz-range-thumb{width:0;height:100vh;cursor:pointer;appearance:none;pointer-events:all;}.slTimeSet{display:flex;align-items:center;justify-content:center;}.slTimeSetWrap{height:40px;padding:4.2px;border-radius:5px;overflow:hidden;position:relative;background:#736f6f;}.slTimeText{position:absolute;right:4.2px;bottom:2.2px;font-weight:normal;}.sensorset:not(.btnTile){background-color:#847d7d;}.sensorset{display:flex;justify-items:stretch;flex-direction:column;padding:4.2px;flex-wrap:nowrap;border-radius:5px;width:150px;overflow:hidden;position:relative;align-items:stretch;cursor:pointer;}.valueBig{font-size:27pt;text-align:right;}.valuesBig{overflow-wrap:anywhere;}.valWrap{background:#ffffff28;border-radius:5px;text-align:end;display:flex;align-items:center;justify-content:flex-end;width:100%;}.vInputs{height:30px;width:84%;border:0;background:none;text-align:end;color:inherit;}.vInputs:focus-visible{width:inherit;}input:focus::placeholder{opacity:.2;}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}input[type=number]{-moz-appearance:textfield;}.kindInput{padding:0 2px 0 1px;}.on,.push:active{background:#3e88cb!important;}.alert{background:#d8524f!important}.btnTile{background:#635d5d;}.sensors{padding-bottom:2%;overflow-wrap:anywhere;}.values{display:grid;grid-template-columns:auto auto;justify-content:space-between;grid-column-gap:5px;overflow-wrap:anywhere;align-items:end;}.cron{padding-bottom:1pt;text-align:end;}input::placeholder{opacity:1;color:white;}#opener{bottom:0;z-index:2;width:100%;position:fixed;}.open{background:none;display:flex;max-width:200px;align-items:center;margin:auto;padding-bottom:2vh;justify-content:space-between;}.sidenav{height:100%;width:280px;position:fixed;z-index:20;top:0;left:-280px;background-color:#111111d9;transition:.6s;overflow-y:hidden;display:flex;flex-direction:column;align-items:center;cursor:pointer;justify-content:center;color:white;}.menueItem{display:grid;justify-content:start;grid-template-columns:25px auto;align-items:end;}.numberUnit{font-size:10px;color:#818181;}#menueList div:hover{color:#444444}.nc{word-break:break-all;}.sideNbtn{position:absolute;bottom:2%;font-size:35px;color:#b3b3b3;}#openSys{left:20px;width:40px;}#closeBtn{right:20px;}#menueList{overflow:scroll;-ms-overflow-style:none;scrollbar-width:none;transition:.2s;width:max-content;max-width:280px;}#menueList::-webkit-scrollbar{display:none;}#menueList div{padding:3px;font-size:25px;}#sysInfo{background:#ffffff17;color:white;transition:.5s;border-radius:5px;width:200px;height:0;overflow:hidden;position:absolute;top:5px;display:flex;flex-direction:column;justify-content:space-evenly;}.syspair{display:flex;justify-content:flex-start;}.syspair>div{font-size:8pt!important;}.syspair div:nth-child(1){text-align:end;width:35%;padding-right:5px;}.menueWrap{transition:.5s;height:185px;flex-shrink:999;}@media screen and (max-height:450px){framie{padding-bottom:40px}#opener{height:40px}}@media screen and (max-width:799px){#framie{position:absolute}}@media screen and (max-width:450px){#allList{grid-row-gap:5px;min-width:unset}#opener{height:40px}#framie{padding-bottom:40px}.allExtra{grid-row-gap:2.5px!important}#bigNumber{grid-row-gap:5px}.bigSpan:nth-child(1){grid-row:1 / span 2;height:100%}#sliderList{grid-column-gap:1vh;grid-row-gap:5px}#sensorList{grid-template-columns:auto auto!important;grid-column-gap:5px;grid-row-gap:5px}.bigNum{display:grid;grid-template-columns:auto auto;grid-column-gap:5px;grid-row-gap:5px;width:50%}.sensors{padding-bottom:2%}}@media (prefers-color-scheme:dark){body{background-color:rgb(0,0,0);color:#b3b3b3}input::placeholder,#allList{color:#b3b3b3}iframe,.slTimeSetWrap{background:black}#opener{background:#000000a8}.bigNumWrap{background:#444444}.bigC{background:#553630}.slTS{mix-blend-mode:lighten;background-color:#444444!important}.slTS:nth-child(1)::-webkit-slider-thumb{border-left:10px solid #6d1343;border-right:10px solid #44607a}.slTS:nth-child(2)::-webkit-slider-thumb{border-left:10px solid #44607a;border-right:10px solid #6d1343}.slTS:nth-child(1)::-moz-range-thumb{border-left:10px solid #6d1343;border-right:10px solid #44607a}.slTS:nth-child(2)::-moz-range-thumb{border-left:10px solid #44607a;border-right:10px solid #6d1343}.slider{mix-blend-mode:lighten;background:#444444}.slider::-webkit-slider-thumb{box-shadow:-100vw 0 0 100vw #44607a;border-left:20px solid #44607a;border-right:20px solid #444444}.slider::-moz-range-thumb{box-shadow:-100vw 0 0 100vw #44607a;border-left:20px solid #44607a;border-right:20px solid #444444}.npSl::-webkit-slider-thumb{box-shadow:0 0 4px 3px grey;background:#44607a}.npSl::-moz-range-thumb{box-shadow:0 0 4px 3px grey;background:#44607a}.npS,.npH,.npV{background-color:#9b9b9b;background-blend-mode:multiply}.on,.push:active{background:#44607a!important}.alert{background:#553044!important}.valueBig{background:none}.btnTile{background:#333}.sensorset:not(.btnTile),#sliderList .sensorset{background-color:#444}}
</STYLE>

<body onload="fetchJson()">
    <script>
       var wasUsed,whichSl,slA,jsonPath,nNr,nP,nP2,nN,unitNr,unitNr1,fJ,nIV,iIV,isOpen,navOpen,myParam,currVal,html,manNav,gesVal,userAgent=window.navigator.userAgent,firstRun=1,bigLength=0,hasParams=1,dataT=[],dataT2=[],isittime=1,NrofSlides=0,tsX=0,teX=0,tsY=0,teY=0,msTs=0,msTe=0,cooK=document.cookie,sndTo="control?cmd=SendTo,",tvSet="control?cmd=taskvalueset,",evnT="control?cmd=event,";async function fetchJson(t){for(Array of(mW=450,mW2=9999,cooK.includes("Two=1")&&(mW=mW2,mW2=450),document.styleSheets))for(e of Array.cssRules)e.conditionText=="screen and (max-width: "+mW2+"px)"&&(e.media.mediaText="screen and (max-width: "+mW+"px)"),e.conditionText?.includes("prefers-color-scheme")&&(cooK.includes("Col=1")?e.media.mediaText="(prefers-color-scheme: light)":e.media.mediaText="(prefers-color-scheme: dark)");null==(myParam=(urlParams=new URLSearchParams(window.location.search)).get("unit"))&&(hasParams=0),someoneEn=0,jsonPath||(jsonPath="/json");let n=nNr;if(responseTime=Date.now(),myJson=await (response=await getUrl(jsonPath)).json(),isittime){if(Date.now()-responseTime<2e3&&n===nNr){document.getElementById("allList").style.filter="blur(0)",html="",html1="",html2="",html3="",dataT=[];let s=-1;unit=myJson.WiFi.Hostname,unitNr=myJson.System["Unit Number"],syshtml=(htSys='<div class="syspair"><div>')+"Sysinfo</div><div>"+unit+"</div></div>"+htSys+"Local Time:</div><div>"+(sysInfo=myJson.System)["Local Time"]+"</div></div>"+htSys+"Uptime:</div><div>"+minutesToDhm(sysInfo.Uptime)+"</div></div>"+htSys+"Load:</div><div>"+sysInfo.Load+"%</div></div>"+htSys+"Free Ram:</div><div>"+sysInfo["Free RAM"]+"</div></div>"+htSys+"Free Stack:</div><div>"+sysInfo["Free Stack"]+"</div></div>"+htSys+"IP Address:</div><div>"+myJson.WiFi["IP Address"]+"</div></div>"+htSys+"RSSI:</div><div>"+myJson.WiFi.RSSI+" dBm</div></div>"+htSys+"Build:</div><div>"+sysInfo.Build+"</div></div>"+htSys+"Eco Mode:</div><div>"+("true"==sysInfo["CPU Eco Mode"]?"on":"off")+"</div></div>",(clockBig=(clockBig=(jsonT=myJson.System["Local Time"]).split(" ")[1]).split(":")).pop(),clockBig=clockBig.join(":"),dateD=(dateBig=jsonT.split(" ")[0]).split("-")[2],dateM=dateBig.split("-")[1],dateY=dateBig.split("-")[0],myJson.Sensors.length?(myJson.Sensors.forEach(t=>{utton=t.TaskName,htS1=' sensorset clickables" onclick="playSound(3000), ',htS2='<div  class="sensors" style="font-weight:bold;">'+utton+"</div>",exC=!![38].indexOf(t.TaskDeviceNumber),exC2=!t.Type?.includes("Display"),"true"===(taskEnabled=t.TaskEnabled.toString())&&t.TaskValues&&!utton.includes("XX")&&exC&&exC2&&!hasParams?(someoneEn=1,firstItem=!0,t.TaskValues.forEach(n=>{if(wasUsed=!1,n.Name.toString().includes("XX")&&(wasUsed=!0),"nan"==n.Value&&(n.Value=0,n.NrDecimals=0),num2Value="number"==typeof n.Value?n.Value.toFixed(n.NrDecimals):n.Value,itemN=(iN=n.Name.toString()).split("?")[0],(kindN=iN.split("?")[1])||(kindN=""),"H"==kindN&&(kindN="%"),slMax=1023,slMin=0,slStep=1,whichSl=0,(iN.match(/\&/g)||[]).length>=2?(s++,itemTSName=0===dataT2.length?0:dataT2[s],isTspeak=!0,itemN=iN.split("&")[0],chanN=iN.split("&")[1],(fieldN=iN.split("&")[2]).includes("?")&&(fieldN=fieldN.split("?")[0]),dataT.push([chanN,fieldN,n.NrDecimals,s])):isTspeak=!1,1==t.TaskDeviceNumber&&(wasUsed=!0,bS="btnStateC"===iN&&n.Value<2||1===n.Value?"on":2===n.Value?"alert":"",t.TaskDeviceGPIO1&&iN.includes("State")?("iState"===iN&&(n.Value=1==n.Value?0:1),html+='<div class="btnTile '+bS+htS1+"buttonClick('"+(utton=utton+"?"+t.TaskDeviceGPIO1)+"', '"+n.Value+"')\">"+htS2):t.TaskDeviceGPIO1&&"ledState"===iN?(html2+='<div class="sensorset"><input type="range" min="'+slMin+'" max="'+slMax+'"  step="'+slStep+'" value="'+num2Value+'" id="'+utton+'"class="slider '+t.TaskNumber+","+n.ValueNumber,html2+=' noVal"><div  class="sensors" style="align-items: flex-end;"><div style="font-weight:bold;">'+utton+"</div></div></div>"):itemN.includes("btnState")?("ibtnState"===itemN&&(n.Value=1==n.Value?0:1),kindN&&(utton=utton+"?"+kindN),html+='<div class="btnTile '+bS+htS1+"buttonClick('"+utton+"', '"+n.Value+"')\">"+htS2):wasUsed=!1),33==t.TaskDeviceNumber&&!iN.includes("XX")&&!utton.includes("bigVal")){if(wasUsed=!0,bS="C"===kindN&&n.Value<2||1===n.Value?"on":2===n.Value?"alert":"",["dButtons","vInput","pButtons"].some(n=>t.TaskName.includes(n))&&n.Name.includes("noVal"))n.Name.includes("noValAuto")?window.innerWidth>=450&&(html+='<div class="sensorset btnTile"></div>'):html+='<div class="sensorset btnTile"></div>';else if(utton.includes("dButtons"))n.Value>-1&&(itemNB=itemN.split("&")[0],"A"==itemN.split("&")[1]?html+='<div class="btnTile '+bS+htS1+"getNodes('"+itemNB+'\')"><div  class="sensors nodes" style="font-weight:bold;">'+itemNB+"</div></div>":html+='<div class="btnTile '+bS+htS1+"buttonClick('"+itemN+'\')"><div id="'+itemN+'" class="sensors" style="font-weight:bold;">'+itemNB+"</div></div>");else if(utton.includes("pButtons"))n.Value>-1&&(itemNB=itemN.split("&")[0],html+='<div class="'+bS+' btnTile push sensorset" onpointerdown="playSound(3000), pushClick(\''+itemN+"',1)\" onpointerup=\"pushClick('"+itemN+'\',0)"><div id="'+itemN+'" class="sensors" style="font-weight:bold;">'+itemNB+"</div></div>");else if(utton.includes("vInput"))itemN||(itemN="&nbsp;"),html+='<div class="sensorset clickables"><div class="sensors" style="font-weight:bold" onclick="getInput(this.nextElementSibling.firstChild)">'+itemN+'</div><div class="valWrap btnTile"><input type="number" class="vInputs '+t.TaskNumber+","+n.ValueNumber+'" id="'+itemN+'"name="'+utton+'" placeholder="'+num2Value+'" onkeydown="getInput(this)" onclick="getInput(this,1)"> <div class="kindInput">'+kindN+"</div></div></div>";else if(utton.includes("vSlider"))slName=iN,slKind="",(iN.match(/\?/g)||[]).length>=3&&(slName=iN.split("?")[0],slMin=iN.split("?")[1],slMax=iN.split("?")[2],slStep=iN.split("?")[3],slKind=iN.split("?")[4]),slKind||(slKind=""),"H"==slKind&&(slKind="%"),html2+='<div class="sensorset"><input type="range" min="'+slMin+'" max="'+slMax+'"  step="'+slStep+'" value="'+num2Value+'" id="'+iN+'"class="slider sL '+t.TaskNumber+","+n.ValueNumber,utton.includes("nvSlider")?html2+=' noVal"><div  class="sensors" style="align-items: flex-end;"><div style="font-weight:bold;">'+slName+"</div></div></div>":html2+='"><div  class="sensors" style="align-items: flex-end;"><div style="font-weight:bold;">'+slName+'</div><div class="sliderAmount" style="text-align: right;">'+num2Value+slKind+"</div></div></div>";else if(utton.includes("tSlider")){slT2=((slT1=n.Value.toFixed(4))+"").split(".")[1],hour1=Math.floor((slT1=Math.floor(slT1))/60),minute1=slT1%60;let i=minute1.toString().padStart(2,"0");hour2=Math.floor(slT2/60),minute2=slT2%60;let l=minute2.toString().padStart(2,"0");htmlSlider1='<input class="slTS" type="range" min="0" max="1440" step="5" value="',html2+='<div id="'+iN+'" class="slTimeSetWrap '+utton+" "+t.TaskNumber+","+n.ValueNumber+'" style="font-weight:bold;">'+iN+'<div class="slTimeText"> <span class="hAmount1">'+hour1+'</span><span>:</span><span class="mAmount1">'+i+'</span><span>-</span><span class="hAmount2">'+hour2+'</span><span>:</span><span class="mAmount2">'+l+'</span></div><div class="slTimeSet">'+htmlSlider1+slT1+'" id="'+iN+'L">'+htmlSlider1+slT2+'" id="'+iN+'R"></div></div>'}else if(utton.includes("neoPixel"))switch(html2+='<input type="range"max="',neo1='min="0" value="'+num2Value+'" id="'+utton,neo2='"class="sL npSl '+t.TaskNumber+","+n.ValueNumber,iN){case"h":html2+='359"'+neo1+"?H"+neo2+' npH noVal">';break;case"s":html2+='100"'+neo1+"?S"+neo2+' npS noVal">';break;case"v":html2+='100"'+neo1+"?V"+neo2+' npV noVal">'}else wasUsed=!1}if(utton.includes("bigVal")){wasUsed=!0;let a='<div class="valuesBig" style="font-weight:bold;text-align:left;">';!0==firstItem&&(html3+='<div class="bigNum">',bigLength<t.TaskValues.length&&(bigLength=t.TaskValues.length)),iN.includes("XX")||(utton.includes("bigValC")?3!==t.TaskValues.length||t.TaskValues.some(t=>"XX"===iN)?html3+='<div class="bigNumWrap bigC">':html3+='<div class="bigNumWrap bigC bigSpan">':3!==t.TaskValues.length||t.TaskValues.some(t=>"XX"===iN)?html3+='<div class="bigNumWrap">':html3+='<div class="bigNumWrap bigSpan">',htS3=a+iN+'</div><div id="',["Clock","Uhr","Zeit","Time"].some(t=>iN.includes(t))?html3+=htS3+'clock" class="valueBig">'+clockBig+"</div></div>":iN.toLowerCase().includes("datum")?html3+=htS3+'date" class="valueBig">'+dateD+"."+dateM.toString()+"</div></div>":iN.toLowerCase().includes("date")?html3+=htS3+'date" class="valueBig">'+dateM+"-"+dateD.toString()+"</div></div>":["year","jahr"].some(t=>iN.toLowerCase().includes(t))?html3+=htS3+'year" class="valueBig">'+dateY+"</div></div>":iN.includes("noVal")?html3+=a+'</div><div class="valueBig"></span></div></div>':isTspeak?html3+=a+itemN+'</div><div id="'+itemN+'TS" class="valueBig">'+itemTSName+'<span style="background:none;padding-right: 1%;">'+kindN+"</span></div></div>":html3+=a+itemN+'</div><div class="valueBig">'+num2Value+'<span style="background:none;padding-right: 1%;">'+kindN+"</span></div></div>")}wasUsed||(!0==firstItem&&(html1+='<div class="'+htS1+"buttonClick('"+utton+"')\">"+htS2),isTspeak?html1+='<div class="values thingspeak"><div>'+itemN+'</div><div id="'+itemN+'TS">'+itemTSName+kindN+"</div></div>":81==t.TaskDeviceNumber?html1+='<div class="cron"><div>'+itemN+'</div><div style="font-size: 10pt;">'+n.Value+"</div></div>":html1+='<div class="values therest"><div>'+itemN+"</div><div>"+num2Value+kindN+"</div></div>"),firstItem=!1}),html+="</div>",html1+="</div>",html3+="</div>",cooK.includes("Sort=1")||(html+=html1,html1="")):"true"===taskEnabled&&!utton.includes("XX")&&exC&&exC2&&!hasParams&&(html1+='<div  class="sensorset clickables" onclick="buttonClick(\''+utton+'\')"><div class="sensors" style="font-weight:bold;">'+utton+"</div><div></div><div></div></div>",someoneEn=1,document.getElementById("sensorList").innerHTML=html)}),someoneEn||hasParams||(html+='<div class="sensorset clickables" onclick="splitOn(); topF()"> <div class="sensors" style="font-weight:bold;">no tasks enabled or visible...</div>')):html+='<div class="sensorset clickables"><div  class="sensors" style="font-weight:bold;">no tasks configured...</div>',html+=html1,document.getElementById("sysInfo").innerHTML=syshtml,document.getElementById("sensorList").innerHTML=html,document.getElementById("sliderList").innerHTML=html2,document.getElementById("bigNumber").innerHTML=html3,firstRun&&(userAgent.match(/iPhone/i)&&(document.body.style.height="101vh"),fJ=setInterval(fetchJson,2e3),setInterval(getTS,1e4),getTS(),getNodes(),longPressS(),longPressN(),addEonce(),unitNr1=myJson.System["Unit Number"],initIP=0,nP2="http://"+(initIP="(IP unset)"==myJson.WiFi["IP Address"]?"192.168.4.1":myJson.WiFi["IP Address"])+"/devices",nP="http://"+initIP+"/tools",firstRun=0),styleU=unitNr===unitNr1?"&#8858;&#xFE0E;":"",hasParams||(document.getElementById("unitId").innerHTML=styleU+unit+'<span class="numberUnit"> ('+myJson.WiFi.RSSI+")</span>",document.getElementById("unitT").innerHTML=styleU+unit),paramS(),changeCss(),resizeText(),longPressB(),t&&dataT.length&&getTS()}else n===nNr&&(document.getElementById("unitId").innerHTML=nN+" takes very long to answer! ("+(Date.now()-responseTime)+"ms)<br /> Check connection, choose another node or wait..",document.getElementById("allList").style.filter="blur(5px)")}}async function getTS(){if(dataT)for(Array of dataT)myTS=await (responseTS=await fetch("https://api.thingspeak.com/channels/"+Array[0]+"/fields/"+Array[1]+"/last")).json(),responseTS.ok?dataT2[Array[3]]=myTS.toFixed(Array[2]):dataT2.push("error")}function changeCss(){x="auto ",document.querySelectorAll("input[type=range]").length?document.getElementById("allList").classList.remove("allExtra"):document.getElementById("allList").classList.add("allExtra");var t=document.querySelectorAll(".bigNum"),n=document.getElementsByClassName("valuesBig").length,s=document.getElementById("sensorList"),i=s.getElementsByClassName("sensorset").length;if(z=0,n||(z=i),4===bigLength||z>9)y=x+x+x+x,coloumnSet=4;else if(3===bigLength||z>4)y=x+x+x,coloumnSet=3;else if(2===bigLength||z>1)y=x+x,coloumnSet=2;else if(1===bigLength||z<2){if(y=x,t.length)for(var l=0;l<t.length;++l)t[l].classList.add("bigNumOne");coloumnSet=1}else y=x+x,coloumnSet=2;if(s.style.gridTemplateColumns=y,bigLength>1&&t.length)for(var l=0;l<t.length;++l)t[l].classList.remove("bigNumOne");if((window.innerWidth<450||cooK.includes("Two=1"))&&(coloumnSet=(1!==bigLength||numBigger)&&(0!==bigLength||1!==i)?2:1),i%coloumnSet!=0){calcTile=coloumnSet-(i-coloumnSet*Math.floor(i/coloumnSet));for(let a=1;a<=calcTile;a++)html+='<div class="sensorset"></div>'}document.getElementById("sensorList").innerHTML=html,bigLength=0}function paramS(){var t=document.querySelectorAll(".slTS");t.forEach(t=>{t.addEventListener("input",updateSlTS),t.addEventListener("change",sliderChTS)});var t=document.querySelectorAll(".sL");t.forEach(t=>{t.addEventListener("input",updateSlider),t.addEventListener("change",sliderChange)}),(neoS=document.querySelectorAll(".npS")).forEach(t=>{hVal=document.getElementById(t.id.split("?")[0]+"?H")?.value,(vVal=document.getElementById(t.id.split("?")[0]+"?V")?.value||20)<20&&(vVal=20),t.style.backgroundImage="linear-gradient(to right, hsl(0,0%,"+vVal+"%),hsl("+hVal+",100%,50%))"})}function addEonce(){document.addEventListener("touchstart",t=>{msTs=Date.now(),tsX=t.changedTouches[0].screenX,tsY=t.changedTouches[0].screenY}),document.addEventListener("touchend",t=>{msTe=Date.now(),teX=t.changedTouches[0].screenX,teY=t.changedTouches[0].screenY,checkDirection()}),document.addEventListener("mousemove",t=>{manNav||navOpen||!(t.clientX<10)||-280!==document.getElementById("mySidenav").offsetLeft||openNav()}),document.getElementById("mySidenav").addEventListener("mouseleave",t=>{manNav||closeNav()})}function checkDirection(){touchtime=msTe-msTs,touchDistX=teX-tsX,touchDistY=teY-tsY,teX<tsX&&navOpen&&Math.abs(touchDistX)>40&&30>Math.abs(touchDistY)&&touchtime<250&&closeNav(),teX>tsX&&!navOpen&&Math.abs(touchDistX)>40&&30>Math.abs(touchDistY)&&touchtime<250&&openNav()}function updateSlTS(t){isittime=0,nuM="L"==(slider=t.target).id.slice(-1)?1:2;let n=slider.parentElement.closest(".slTimeSetWrap").firstElementChild.querySelector(".hAmount"+nuM),s=slider.parentElement.closest(".slTimeSetWrap").firstElementChild.querySelector(".mAmount"+nuM);var i=Math.floor(slider.value/60),l=slider.value%60;let a=l.toString().padStart(2,"0");n.textContent=i,s.textContent=a}function updateSlider(t){if(NrofSlides++,isittime=0,currVal=(slider=t.target).attributes.value.nodeValue,slKind=slider.id.split("?")[4],!slider.className.includes("noVal")){let n=slider.closest("div.sensorset").querySelector(".sliderAmount");slKind||(slKind=""),"H"==slKind&&(slKind="%"),slA=Number(t.target.value).toFixed(void 0!==t.target.step.split(".")[1]&&t.target.step.split(".")[1].length)+slKind,n.textContent=slA}"npSl"==slider.classList[1]&&(hVal=document.getElementById((sliderId=slider.id.split("?")[0])+"?H")?.value,gesVal=[hVal,sVal=document.getElementById(sliderId+"?S")?.value,vVal=document.getElementById(sliderId+"?V")?.value],vVal=vVal??0,sVal&&hVal&&(vVal<20&&(vVal=20),(sGrad=document.getElementById(sliderId+"?S")).style.backgroundImage="linear-gradient(to right, hsl(0,0%,"+vVal+"%),hsl("+hVal+",100%,50%))"))}function sliderChTS(t){playSound(4e3),slider=t.target;let n=slider.parentNode.parentNode;if(slider.id==n.id+"L")var s=document.getElementById(n.id+"R");else var s=document.getElementById(n.id+"L");unitNr===unitNr1?(slider.id==n.id+"L"?getUrl(tvSet+n.classList[2]+","+t.target.value+"."+s.value.toString().padStart(4,"0")):getUrl(tvSet+n.classList[2]+","+s.value+"."+t.target.value.toString().padStart(4,"0")),getUrl(evnT+n.classList[1]+"Event="+n.classList[2].split(",")[1])):(slider.id==n.id+"L"?getUrl(sndTo+nNr+',"taskvalueset,'+n.classList[2]+","+t.target.value+"."+s.value.toString().padStart(4,"0")+'"'):getUrl(sndTo+nNr+',"taskvalueset,'+n.classList[2]+","+s.value+"."+t.target.value.toString().padStart(4,"0")+'"'),getUrl(sndTo+nNr+',"event,'+n.classList[1]+"Event="+n.classList[2].split(",")[1]+'"')),clearTimeout(iIV),iIV=setTimeout(blurInput,1e3)}function sliderChange(t){playSound(4e3),maxVal=(slider=t.target).attributes.max.nodeValue,minVal=slider.attributes.min.nodeValue,OnOff="",parseFloat(t.target.value).toFixed(void 0!==t.target.step.split(".")[1]&&t.target.step.split(".")[1].length),slA=t.target.value,1==NrofSlides&&"npSl"!=slider.classList[1]&&(slA>5*maxVal/6&&currVal!==maxVal&&(slA=maxVal,OnOff=",1",isittime=1,setTimeout(fetchJson,500)),slA<maxVal/6&&currVal!==minVal&&(slA=minVal,OnOff=",0",isittime=1,setTimeout(fetchJson,500))),sliderId=(slider.id.match(/\?/g)||[]).length>=3||"npSl"==slider.classList[1]?slider.id.split("?")[0]:slider.id,gesVal&&(gesVal=gesVal.filter(t=>t)),unitNr===unitNr1?(getUrl(tvSet+slider.classList[2]+","+slA),"npSl"!=slider.classList[1]?getUrl(evnT+sliderId+"Event="+slA+OnOff):getUrl(evnT+sliderId+"Event="+gesVal)):(getUrl(sndTo+nNr+',"taskvalueset,'+slider.classList[2]+","+slA+'"'),"npSl"!=slider.classList[1]?getUrl(sndTo+nNr+',"event,'+sliderId+"Event="+slA+OnOff+'"'):getUrl(sndTo+nNr+',"event,'+sliderId+"Event="+gesVal+'"')),clearTimeout(iIV),iIV=setTimeout(blurInput,1e3),NrofSlides=0}function buttonClick(t,n){t.split("&")[1]?(utton2=t.split("&")[0],getUrl(sndTo+(nNr2=t.split("&")[1])+',"event,'+utton2+'Event"')):t.split("?")[1]?(gpioNr=t.split("?")[1],gS=1==n?0:1,unitNr===unitNr1?getUrl("control?cmd=gpio,"+gpioNr+","+gS):getUrl(sndTo+nNr+',"gpio,'+gpioNr+","+gS+'"')):unitNr===unitNr1?getUrl(evnT+t+"Event"):getUrl(sndTo+nNr+',"event,'+t+'Event"'),setTimeout(fetchJson,400)}function pushClick(t,n){0==n?(isittime=1,playSound(1e3)):isittime=0,t.split("&")[1]?(utton2=t.split("&")[0],getUrl(sndTo+(nNr2=t.split("&")[1])+',"event,'+utton2+"Event="+n+'"')):unitNr===unitNr1?getUrl(evnT+t+"Event="+n):getUrl(sndTo+nNr+',"event,'+t+"Event="+n+'"')}function getInput(t,n){"click"===event.type&&(isittime=0,iIV=setTimeout(blurInput,8e3),t.addEventListener("blur",t=>{clearTimeout(iIV),isittime=1,setTimeout(fetchJson,400)})),t.value.length>12&&(t.value=t.value.slice(0,12)),"Enter"!==event.key&&("click"!==event.type||n)?"Escape"===event.key?document.getElementById(t.id).value="":(clearTimeout(iIV),iIV=setTimeout(blurInput,5e3)):(isittime=1,t.value?(playSound(4e3),unitNr===unitNr1?getUrl(tvSet+t.classList[1]+","+t.value):getUrl(sndTo+nNr+',"taskvalueset,'+t.classList[1]+","+t.value+'"'),buttonClick(t.id)):setTimeout(fetchJson,400),clearTimeout(iIV))}function blurInput(){isittime=1}function openNav(t){navOpen=1,t&&(manNav=1),nIV&&clearInterval(nIV),nIV=setInterval(getNodes,1e4),-280===document.getElementById("mySidenav").offsetLeft?(getNodes(),document.getElementById("mySidenav").style.left="0"):closeNav()}function closeNav(){manNav=0,navOpen=0,clearInterval(nIV),document.getElementById("mySidenav").style.left="-280px"}function openSys(){0===document.getElementById("sysInfo").offsetHeight?(document.getElementById("menueWrap1").style.flexShrink="0",document.getElementById("sysInfo").style.height="180px"):(document.getElementById("sysInfo").style.height="0",document.getElementById("menueWrap1").style.flexShrink="999")}async function getNodes(t,n,s){if(responseTime=Date.now(),s||(myJson=await (response=await getUrl("json")).json()),Date.now()-responseTime<5e3){let i="";nInf=myJson.nodes;let l=-1;if(myJson.nodes.forEach(s=>{l++,s.nr==myParam&&hasParams&&(nodeChange(l),hasParams=0),i+='<div class="menueItem"><div class="serverUnit" style="text-align: center;">'+(styleN=s.nr===unitNr1?s.nr===unitNr?"&#8857;&#xFE0E;":"&#8858;&#xFE0E;":s.nr===unitNr?"&#183;&#xFE0E;":"")+'</div><div id="'+s.name+'" class="nc" onclick="sendUpdate(); nodeChange('+l+');iFr();">'+s.name+'<span class="numberUnit">'+s.nr+"</span></div></div>",(t||n)&&(n?s.nr===unitNr1?fetch(evnT+t+"Long"):fetch("/control?cmd=SendTo,"+s.nr+',"event,'+t+'Long"'):isittime&&(s.nr===unitNr1?fetch(evnT+t+"Event"):fetch("/control?cmd=SendTo,"+s.nr+',"event,'+t+'Event"')))}),l=0,document.getElementById("menueList").innerHTML=i,hasParams){let a='<div class="sensorset clickables"><div  class="sensors" style="font-weight:bold;">can not find node # '+myParam+"...</div></div>";document.getElementById("sensorList").innerHTML=a,hasParams=0,setTimeout(fetchJson,3e3)}else nIV||setTimeout(fetchJson,1e3)}}function sendUpdate(){setTimeout(getNodes.bind(null,"","",1),600)}function nodeChange(t){(nInf=nInf[t])&&(nNr=nInf.nr,nN=nInf.name,nP=`http://${nInf.ip}/tools`,nP2=`http://${nInf.ip}/devices`,jsonPath=`http://${nInf.ip}/json`,window.history.replaceState(null,null,"?unit="+nNr),dataT2=[],fetchJson(1)),window.innerWidth<450&&0===document.getElementById("sysInfo").offsetHeight&&closeNav()}function resizeText(){let t=({clientWidth:t,clientHeight:n,scrollWidth:s,scrollHeight:i})=>s>t||i>n;(({element:n,elements:s,minSize:i=10,maxSize:l=115,step:a=1,unit:d="pt"})=>{(s||[n]).forEach(n=>{let s=i,r=!1,u=n.parentNode;for(;!r&&s<l;)n.style.fontSize=`${s}${d}`,(r=t(u))||(s+=a);n.style.fontSize=`${s-a}${d}`,n.style.lineHeight="0.75"})})({elements:document.querySelectorAll(".valueBig"),step:1})}function launchFs(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}function splitOn(){0===document.getElementById("framie").offsetWidth?(iFr(isOpen=1),document.getElementById("framie").style.width="100%"):(document.getElementById("framie").style.width="0",document.getElementById("framie").innerHTML="",isOpen=0),setTimeout(fetchJson,100)}function iFr(){1===isOpen&&(document.getElementById("framie").innerHTML='<iframe src="'+nP2+'"></iframe>',closeNav())}function topF(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function longPressN(){document.getElementById("mOpen").addEventListener("long-press",function(t){window.location.href=nP})}function longPressS(){document.getElementById("closeBtn").addEventListener("long-press",function(t){t.preventDefault(),mC("Snd=1","Snd=0")}),document.getElementById("nOpen").addEventListener("long-press",function(t){t.preventDefault(),mC("Sort=0","Sort=1")}),document.getElementById("openSys").addEventListener("long-press",function(t){t.preventDefault(),mC("Two=0","Two=1")}),document.getElementById("unitId").addEventListener("long-press",function(t){t.preventDefault(),mC("Col=0","Col=1")})}function mC(t,n){z="; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/;",cooK.includes(t)?(playSound(500),document.cookie=n+z):cooK.includes(n)?(playSound(900),document.cookie=t+z):(playSound(500),document.cookie=n+z),cooK=document.cookie}function longPressB(){var t=!1;let n=document.querySelectorAll(".clickables");n.forEach(n=>{n.addEventListener("long-press",function(s){s.preventDefault();let i=n.querySelector(".sensors"),l=n.querySelector(".nodes");l?getNodes(l.textContent,"1"):i.id.split("&")[1]?(utton2=i.id.split("&")[0],getUrl(sndTo+(nNr2=i.id.split("&")[1])+',"event,'+utton2+'Long"'),setTimeout(fetchJson,400)):(unitNr!==unitNr1||t?(getUrl(sndTo+nNr+',"event,'+i.textContent+'Long"'),t=!0):(getUrl(evnT+i.textContent+"Long"),t=!0),setTimeout(fetchJson,400)),playSound(1e3),isittime=0,iIV=setTimeout(blurInput,600)})})}function minutesToDhm(t){var n=Math.floor(t/1440),s=Math.floor(t%1440/60),i=Math.floor(t%60);return(n>0?n+(1==n?" day ":" days "):"")+(s>0?s+(1==s?" hour ":" hours "):"")+(i>0?i+(1==i?" minute ":" minutes "):"")}function playSound(t){(!cooK.includes("Snd=0")||t<1e3)&&(isittime||3e3!=t)&&(o=(c=new AudioContext).createOscillator(),g=c.createGain(),frequency=t,o.frequency.value=frequency,o.type="sawtooth",o.connect(g),g.connect(c.destination),g.gain.setValueAtTime(.05,0),o.start(0),g.gain.exponentialRampToValueAtTime(1e-5,c.currentTime+.01),o.stop(c.currentTime+.01))}async function getUrl(t){let n=new AbortController;setTimeout(()=>n.abort(),5e3);try{response=await fetch(t,{signal:n.signal})}catch{}return response}document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?(console.log("visible"),clearTimeout(fJ),fetchJson(),fJ=setInterval(fetchJson,2e3)):(console.log("invisible"),clearTimeout(fJ))}),function(t,n){"use strict";var s=null,i="PointerEvent"in t||t.navigator&&"msPointerEnabled"in t.navigator,l="ontouchstart"in t||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,a=0,d=0;function r(t){var s;u(),t=void 0!==(s=t).changedTouches?s.changedTouches[0]:s,this.dispatchEvent(new CustomEvent("long-press",{bubbles:!0,cancelable:!0,detail:{clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,pageX:t.pageX,pageY:t.pageY},clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY}))||n.addEventListener("click",function t(s){var i;n.removeEventListener("click",t,!0),(i=s).stopImmediatePropagation(),i.preventDefault(),i.stopPropagation()},!0)}function u(n){var i;(i=s)&&(t.cancelAnimationFrame?t.cancelAnimationFrame(i.value):t.webkitCancelAnimationFrame?t.webkitCancelAnimationFrame(i.value):t.webkitCancelRequestAnimationFrame?t.webkitCancelRequestAnimationFrame(i.value):t.mozCancelRequestAnimationFrame?t.mozCancelRequestAnimationFrame(i.value):t.oCancelRequestAnimationFrame?t.oCancelRequestAnimationFrame(i.value):t.msCancelRequestAnimationFrame?t.msCancelRequestAnimationFrame(i.value):clearTimeout(i)),s=null}"function"!=typeof t.CustomEvent&&(t.CustomEvent=function(t,s){s=s||{bubbles:!1,cancelable:!1,detail:void 0};var i=n.createEvent("CustomEvent");return i.initCustomEvent(t,s.bubbles,s.cancelable,s.detail),i},t.CustomEvent.prototype=t.Event.prototype),t.requestAnimFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(n){t.setTimeout(n,1e3/60)},n.addEventListener(i?"pointerup":l?"touchend":"mouseup",u,!0),n.addEventListener(i?"pointerleave":l?"touchleave":"mouseleave",u,!0),n.addEventListener(i?"pointermove":l?"touchmove":"mousemove",function(t){var n=Math.abs(a-t.clientX),s=Math.abs(d-t.clientY);(n>=10||s>=10)&&u()},!0),n.addEventListener("wheel",u,!0),n.addEventListener("scroll",u,!0),n.addEventListener(i?"pointerdown":l?"touchstart":"mousedown",function(i){var l,v,m;a=i.clientX,d=i.clientY,u(l=i),m=parseInt(function(t,s,i){for(;t&&t!==n.documentElement;){var l=t.getAttribute(s);if(l)return l;t=t.parentNode}return"600"}(v=l.target,"data-long-press-delay","600"),10),s=function(n,s){if(!(t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame&&t.mozCancelRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame))return t.setTimeout(n,s);var i=(new Date).getTime(),l={},a=function(){(new Date).getTime()-i>=s?n.call():l.value=requestAnimFrame(a)};return l.value=requestAnimFrame(a),l}(r.bind(v,l),m)},!0)}(window,document);
    </script>

<div id="container">
    <div id="framie"></div>
    <div id="mySidenav" class="sidenav">
        <div id="sysInfo">no info found...</div>
        <div class="menueWrap" id="menueWrap1"></div>
        <div id="menueList"></div>
        <div class="menueWrap" id="menueWrap2"></div>
        <div class="sideNbtn" id="openSys" onclick="openSys()">
            <div id="dateV">20230423/1</div>&#8505;&#xFE0E;
        </div>
        <div class="sideNbtn" id="closeBtn" onclick="closeNav()">&times;&#xFE0E;</div>
    </div>
    <div id="unitId" style="cursor: pointer;" onclick="launchFs(document.documentElement)">&nbsp;</div>
    <div id="allList">
        <div id="bigNumber"></div>
        <div id="sliderList"></div>
        <div id="sensorList"></div>
    </div>
    <div id="opener">
        <div class="open">
            <span id="nOpen" style="font-size:30px;cursor:pointer;background:none;"
                onclick="openNav(event)">&#9776;&#xFE0E;</span>
            <span id="mOpen" style="font-size:30px;cursor:pointer;background:none;"
                onclick="splitOn(); topF()">&#8962;&#xFE0E;</span>
        </div>
    </div>
</div>
</body>
</html>