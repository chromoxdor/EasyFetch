<!DOCTYPE html>
<html lang='en'>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset='utf-8' />
    <link rel="icon"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='44' height='44'%3E%3Crect x='0' y='0' rx='6' ry='6' width='44' height='44' style='fill:%233c3c3b' transform='rotate(0 14 20)'/%3E%3Cg transform='rotate(45 26 23)'%3E%3Crect x='4' y='15' rx='2' ry='2' width='4' height='20' style='fill:%2325a843' /%3E%3Crect x='12' y='7.5' rx='2' ry='2' width='4' height='35' style='fill:%23ffd103'/%3E%3Crect x='20' y='0' rx='2' ry='2' width='4' height='50' style='fill:%23f28d22' /%3E%3Crect x='28' y='7.5' rx='2' ry='2' width='4' height='35' style='fill:%23e9493e'/%3E%3Ccircle cx='41' cy='25' r='5' fill='white' /%3E%3C/g%3E%3C/svg%3E"
        type="image/svg+xml">
    <title id="unitT"></title>
</head>
<STYLE>
  *{box-sizing:border-box;font-family:sans-serif;font-size:12pt;margin:0;padding:0;}body{margin:0;background:#e8e8e8;color:#4e4a4a;}#container{display:flex;position:absolute;height:100vh;width:100vw;justify-content:center;}#framie{height:100%;transition:.8s;position:relative;z-index:2;padding-bottom:60px;left:0;}iframe{width:100%;height:100%;border:0;background-color:white;box-shadow:4px 0 13px -7px #000000;}#unitId{top:2%;z-index:1;display:flex;position:fixed;}#allList{display:flex;grid-row-gap:1vh;margin:auto;padding:5px;transition:.8s ease-out;flex-direction:column;padding-bottom:40px;padding-top:40px;}.allExtra{grid-row-gap:.5vh!important;}#bigNumber{display:inline-grid;grid-column-gap:1vh;grid-row-gap:1vh;transition:.8s ease-out;}.bigNum{display:inline-flex;grid-template-columns:auto auto auto auto;grid-row-gap:1vh;grid-column-gap:1vh;width:-webkit-fill-available;justify-content:start;transition:.8s ease-out;}.bigNumOne{justify-content:center!important;grid-template-columns:auto!important;width:unset!important;}.bigNumWrap{width:-webkit-fill-available;display:inline-flex;justify-items:stretch;cursor:default;padding:4.2px;border-radius:5px;width:150px;height:75px;flex-direction:column;background:#837c7c;color:white;flex-wrap:nowrap;justify-content:space-between;box-shadow:0 0 10px 1px rgb(0 0 0 / 15%);}.bigC{background:#009c63;}.bigL2{grid-template-columns:auto auto!important;}.bigL3{grid-template-columns:auto auto auto!important;}#sensorList{display:inline-grid;grid-column-gap:1vh;grid-row-gap:1vh;justify-content:start;transition:.8s ease-out;}.sensorL4{grid-template-columns:auto auto auto auto;}.sensorL3{grid-template-columns:auto auto auto;}.sensorL2{grid-template-columns:auto auto;}.sensorL1{grid-template-columns:auto!important;justify-content:center!important;}#sliderList{display:inline-grid;grid-column-gap:1vh;grid-row-gap:1vh;min-width:284px;transition:.8s ease-out;}#sliderList .sensorset{width:inherit;height:40px;background:#837c7c;}#sensorList .sensorset{min-height:60px;}.clickables:active{transform:scale(.95);-webkit-transform:scale(.95);transition:.1s}.slider{-webkit-appearance:none;position:absolute;width:calc(100% + 44.2px);left:-24.2px;mix-blend-mode:color;height:inherit;background:black;}slider::-webkit-slider-runnable-track{background:black;}.slider::-webkit-slider-thumb{-webkit-appearance:none;width:0;height:50px;cursor:pointer;box-shadow:-100vw 0 0 100vw #458fd1;border-left:20px solid #458fd1;border-right:20px solid #837c7c;}.slider::-moz-range-thumb{width:0;height:70px;cursor:pointer;box-shadow:-100vw 0 0 100vw #458fd1;border-left:20px solid #458fd1;border-right:20px solid #837c7c;}.slider::-moz-range-track{height:100vh;background:#ebebeb;}.slTS{-webkit-appearance:none;position:absolute;height:40px;z-index:1;width:calc(100% + 1px);left:1px;mix-blend-mode:overlay;pointer-events:none;flex-wrap:wrap;background-color:#8a8787;}.slTS:hover{background-color:transparent;}.slTimeSetWrap div:nth-child(1) .slTS::-webkit-slider-thumb{border-left:10px solid #d25e42;border-right:10px solid #458fd1;}.slTimeSetWrap div:nth-child(2) .slTS::-webkit-slider-thumb{border-left:10px solid #458fd1;border-right:10px solid #d25e42;}.slTimeSetWrap div:nth-child(1) .slTS::-moz-range-thumb{border-left:10px solid #d25e42;border-right:10px solid #458fd1;}.slTimeSetWrap div:nth-child(2) .slTS::-moz-range-thumb{border-left:10px solid #458fd1;border-right:10px solid #d25e42;}.slTS::-webkit-slider-thumb{-webkit-appearance:none;width:0;height:100vh;cursor:pointer;appearance:none;pointer-events:all;}.slTS::-moz-range-thumb{width:0;height:100vh;cursor:pointer;appearance:none;pointer-events:all;}.slTimeSet{height:38px;display:flex;justify-content:flex-end;border-radius:5px;padding:4.2px;width:100%;background:none;align-items:center;position:absolute;top:1px;left:-1px;font-weight:normal;}.slTimeSetWrap{height:40px;display:inline-flex;padding:4.2px;border-radius:5px;overflow:hidden;position:relative;align-items:stretch;color:white;background:#736f6f;box-shadow:0 0 10px 1px rgb(0 0 0 / 15%);}.sensorset:not(.btnTile){background-color:#847d7d;}.sensorset{display:inline-flex;justify-items:stretch;flex-direction:column;padding:4.2px;flex-wrap:nowrap;border-radius:5px;width:150px;overflow:hidden;position:relative;align-items:stretch;cursor:pointer;box-shadow:0 0 10px 1px rgb(0 0 0 / 15%);}.valueBig{font-size:27pt;text-align:right;}.valuesBig{background:none;overflow-wrap:anywhere;}.valWrap{background:#ffffff28;border-radius:5px;text-align:end;display:flex;align-items:center;justify-content:flex-end;width:100%;}.vInputs{height:30px;width:84%;border:0;background:none;text-align:end;}.vInputs:focus-visible{width:inherit;}.kindInput{color:white;}input:focus::placeholder{opacity:.2;}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}input[type=number]{-moz-appearance:textfield;}.on{background-color:#3e88cb!important;}.alert{background-color:#ffc1c1!important}.btnTile{background:#635d5d;}.sensors{padding-bottom:2%;overflow-wrap:anywhere;}.values{display:inline-grid;grid-template-columns:auto auto;justify-content:space-between;grid-column-gap:5px;overflow-wrap:anywhere;align-items:end;}.cron{padding-bottom:1pt;text-align:end;}input::placeholder{opacity:1;}.sensors,.vInputs,input::placeholder,.cron,.cron div,.values,.values div{background:none;color:white;}a{display:inline-block}#opener{bottom:0;z-index:2;width:100%;position:fixed;}.open{background:none;display:flex;max-width:200px;align-items:center;margin:auto;padding-bottom:2%;justify-content:space-between;}.sidenav{height:100%;width:0;position:fixed;z-index:20;top:0;left:0;background-color:#111111d9;transition:.8s;overflow-y:hidden;display:flex;flex-direction:column;align-items:center;cursor:pointer;justify-content:center;}.menueItem{display:grid;justify-content:start;grid-template-columns:25px auto;align-items:center;word-break:break-all;align-items:baseline;}.numberUnit{font-size:10px;color:#818181;background:transparent;}#menueList div:hover{color:#444444}.sideNbtn{position:absolute;bottom:2%;font-size:35px;color:#b3b3b3;}.openSys{left:20px;}.closeBtn{right:20px;}#menueList{overflow:scroll;-ms-overflow-style:none;scrollbar-width:none;}#menueList::-webkit-scrollbar{display:none;}#menueList div{padding:3px;font-size:25px;transition:.1s;}#sysInfo{background:#ffffff17;color:white;transition:.5s;border-radius:5px;width:200px;height:0;overflow:hidden;position:absolute;top:5px;}.syspair{display:flex;justify-content:flex-start;padding-top:6px;}.syspair>div{font-size:8pt!important;}.syspair div:nth-child(1){text-align:end;width:35%;padding-right:5px;}.menueWrap{transition:.5s;height:185px;width:100%;flex-shrink:999;}@media screen and (max-height:450px){framie{padding-bottom:40px}#opener{height:40px}}@media screen and (max-width:799px){#framie{position:absolute}}@media screen and (max-width:450px){#allList{grid-row-gap:5px;min-width:unset}#opener{height:40px}#framie{padding-bottom:40px}.allExtra{grid-row-gap:2.5px!important}#bigNumber{grid-row-gap:5px}.bigSpan:nth-child(1){grid-row:1 / span 2;height:100%}#sliderList{grid-column-gap:1vh;grid-row-gap:5px}#sensorList{grid-template-columns:auto auto;grid-column-gap:5px;grid-row-gap:5px}.bigNum{display:inline-grid;grid-template-columns:auto auto;grid-column-gap:5px;grid-row-gap:5px;width:50%}.sensors{padding-bottom:2%}.slTS{left:2px}}@media (prefers-color-scheme:dark){body{background-color:rgb(0,0,0);color:#b3b3b3}iframe{background-color:black}#opener{background:#000000a8}#unitId{}.bigNumWrap{background:#444444;color:#b3b3b3}.bigC{background:#553630}.slTS{mix-blend-mode:lighten;background-color:#444444!important}.slTimeSetWrap{background:black;color:#b3b3b3}.slTimeSetWrap div:nth-child(1) .slTS::-webkit-slider-thumb{border-left:10px solid #6d1343;border-right:10px solid #44607a}.slTimeSetWrap div:nth-child(2) .slTS::-webkit-slider-thumb{border-left:10px solid #44607a;border-right:10px solid #6d1343}.slTimeSetWrap div:nth-child(1) .slTS::-moz-range-thumb{border-left:10px solid #6d1343;border-right:10px solid #44607a}.slTimeSetWrap div:nth-child(2) .slTS::-moz-range-thumb{border-left:10px solid #44607a;border-right:10px solid #6d1343}.slider{mix-blend-mode:lighten;background-color:#444444!important}.slider::-webkit-slider-thumb{-webkit-appearance:none;box-shadow:-100vw 0 0 100vw #44607a;border-left:20px solid #44607a;border-right:20px solid #444444}.slider::-moz-range-thumb{box-shadow:-100vw 0 0 100vw #44607a;border-left:20px solid #44607a;border-right:20px solid #444444}.slider::-moz-range-track{height:100vh;background:#444444}.on{background-color:#44607a!important}.alert{background-color:#553044!important}.valueBig{background:none}.btnTile{background:#333}span.kindInput{color:#b3b3b3}.sensorset:not(.btnTile),#sliderList .sensorset{background-color:#444}.sensors,.vInputs,input::placeholder,.cron,.cron div,.values,.values div{color:#b3b3b3}.sidenav div{color:inherit}}
</STYLE>

<body onload="fetchJson()">
    <script>
       var wasUsed,whichSl,sliderAmount,isLongNode,lutton,jsonPath,nodeNr,nodeIp,nodePath,nodePath2,unitNr,unitNr1,nodeInterV,InputInterV,isOpen,myParam,urlParams,currVal,html,userAgent=window.navigator.userAgent,firstRun=!0,bigLength=0,hasParams=!0,dataT=[],dataT2=[],isittime=1,NrofSlides=0;async function fetchJson(e){if(null==(myParam=(urlParams=new URLSearchParams(window.location.search)).get("unit"))&&(hasParams=!1),someoneEn=0,onceNoTask=0,jsonPath||(jsonPath="/json"),isittime){myJson=await (response=await fetch(jsonPath)).json(),dataT=[];let t=-1;unit=myJson.WiFi.Hostname,unitNr=myJson.System["Unit Number"];let s='<div class="syspair"><div>Sysinfo</div><div>'+unit+'</div></div><div class="syspair"><div>Local Time:</div><div>'+(sysInfo=myJson.System)["Local Time"]+'</div></div><div class="syspair"><div>Uptime:</div><div>'+minutesToDhm(sysInfo.Uptime)+'</div></div><div class="syspair"><div>Load:</div><div>'+sysInfo.Load+'%</div></div><div class="syspair"><div>Free Ram:</div><div>'+sysInfo["Free RAM"]+'</div></div><div class="syspair"><div>Free Stack:</div><div>'+sysInfo["Free Stack"]+'</div></div><div class="syspair"><div>IP Address:</div><div>'+myJson.WiFi["IP Address"]+'</div></div><div class="syspair"><div>RSSI:</div><div>'+myJson.WiFi.RSSI+' dBm</div></div><div class="syspair"><div>Eco Mode:</div><div>'+("true"==sysInfo["CPU Eco Mode"]?"on":"off")+"</div></div>";html="";let n="",i="";var l=myJson.System["Local Time"],a=l.split(" ")[1];(a=a.split(":")).pop(),a=a.join(":");var o=l.split(" ")[0];dateD=o.split("-")[2],dateM=o.split("-")[1],dateY=o.split("-")[0],nodeInfos=myJson.nodes,myJson.Sensors.length?(myJson.Sensors.forEach(e=>{utton=e.TaskName;let s=' sensorset clickables" onclick="',l='<div  class="sensors" style="font-weight:bold;">'+e.TaskName+"</div>";"true"!==e.TaskEnabled||!e.TaskValues||e.TaskName.includes("XX")||e.Type.includes("Display")||hasParams?"true"!==e.TaskEnabled||e.TaskName.includes("XX")||e.Type.includes("Display")||hasParams||(html+='<div  class="sensorset clickables" onclick="buttonClick(\''+utton+'\')"><div class="sensors" style="font-weight:bold;">'+e.TaskName+"</div><div></div><div></div></div>",someoneEn=1,document.getElementById("sensorList").innerHTML=html):(someoneEn=1,firstItem=!0,e.TaskValues.forEach(o=>{if(wasUsed=!1,o.Name.includes("XX")&&(wasUsed=!0),"nan"==o.Value&&(o.Value=0,o.NrDecimals=0),num2Value="number"==typeof o.Value?o.Value.toFixed(o.NrDecimals):o.Value,o.Name=o.Name.toString(),itemSl=o.Name,itemN=(itemA=o.Name).split("?")[0],(kindN=itemA.split("?")[1])||(kindN=""),"H"==kindN&&(kindN="%"),slMax=1023,slMin=0,slStep=1,whichSl=0,(itemA.match(/\&/g)||[]).length>=2?(t++,itemTSName=0===dataT2.length?0:dataT2[t],isTspeak=!0,itemN=itemA.split("&")[0],chanN=itemA.split("&")[1],(fieldN=itemA.split("&")[2]).includes("?")&&(fieldN=fieldN.split("?")[0]),dataT.push([chanN,fieldN,o.NrDecimals,t])):isTspeak=!1,1==e.TaskDeviceNumber&&(wasUsed=!0,StateClass="btnStateC"===o.Name&&o.Value<2||1===o.Value?"on":2===o.Value?"alert":"off",e.TaskDeviceGPIO1&&o.Name.includes("State")?("iState"===o.Name&&(o.Value=1==o.Value?0:1),html+='<div class="btnTile '+StateClass+s+"buttonClick('"+(utton=e.TaskName+"?"+e.TaskDeviceGPIO1)+"', '"+o.Value+"')\">"+l):e.TaskDeviceGPIO1&&"ledState"===o.Name?(n+='<div class="sensorset"><input type="range" min="'+slMin+'" max="'+slMax+'"  step="'+slStep+'" value="'+num2Value+'" id="'+e.TaskName+'"class="slider '+e.TaskNumber+","+o.ValueNumber,n+=' noVal"><div  class="sensors" style="align-items: flex-end;"><div style="font-weight:bold;">'+e.TaskName+"</div></div></div>"):"btnState"===itemN?(kindN&&(utton=e.TaskName+"?"+kindN),html+='<div class="btnTile '+StateClass+s+"buttonClick('"+utton+"', '"+o.Value+"')\">"+l):wasUsed=!1),33==e.TaskDeviceNumber&&!["noVal","XX"].some(e=>o.Name.includes(e))){if(wasUsed=!0,e.TaskName.includes("dButtons"))itemNB=itemN.split("&")[0],"C"===kindN&&o.Value<2||1===o.Value?html+='<div class="on':2===o.Value?html+='<div class="btnTile alert':html+='<div class="btnTile off ',"A"==itemN.split("&")[1]?html+=buttonClick+"getNodes('"+itemNB+'\')"><div  class="sensors nodes" style="font-weight:bold;">'+itemNB+"</div></div>":html+=s+"buttonClick('"+itemN+'\')"><div id="'+itemN+'" class="sensors" style="font-weight:bold;">'+itemNB+"</div></div>";else if(e.TaskName.includes("vInput"))itemN||(itemN="&nbsp;"),html+='<div class="sensorset clickables"><div class="sensors" style="font-weight:bold" onclick="getInput(this.nextElementSibling.firstChild)" >'+itemN+'</div><div class="valWrap btnTile"><input type="number" class="vInputs '+e.TaskNumber+","+o.ValueNumber+'" id="'+itemN+'"name="'+utton+'" placeholder="'+num2Value+'" onkeydown="getInput(this)" onclick="getInput(this,1)"> <div class="kindInput">'+kindN+"</div></div></div>";else if(e.TaskName.includes("vSlider"))slName=o.Name,slKind="",(itemSl.match(/\?/g)||[]).length>=3&&(slName=itemSl.split("?")[0],slMin=itemSl.split("?")[1],slMax=itemSl.split("?")[2],slStep=itemSl.split("?")[3],slKind=itemSl.split("?")[4]),slKind||(slKind=""),"H"==slKind&&(slKind="%"),n+='<div class="sensorset"><input type="range" min="'+slMin+'" max="'+slMax+'"  step="'+slStep+'" value="'+num2Value+'" id="'+o.Name+'"class="slider '+e.TaskNumber+","+o.ValueNumber,e.TaskName.includes("nvSlider")?n+=' noVal"><div  class="sensors" style="align-items: flex-end;"><div style="font-weight:bold;">'+slName+"</div></div></div>":n+='"><div  class="sensors" style="align-items: flex-end;"><div style="font-weight:bold;">'+slName+'</div><div class="sliderAmount" style="text-align: right;">'+num2Value+slKind+"</div></div></div>";else if(e.TaskName.includes("tSlider")){slT2=((slT1=o.Value.toFixed(4))+"").split(".")[1];var d=Math.floor((slT1=Math.floor(slT1))/60),r=slT1%60;let c=r.toString().padStart(2,"0");var m=Math.floor(slT2/60),u=slT2%60;let v=u.toString().padStart(2,"0"),g='<div class="slTimeSet"><input class="slTS" type="range" min="0" max="1440" step="5" value="';n+='<div id="'+o.Name+'" class="slTimeSetWrap '+e.TaskName+" "+e.TaskNumber+","+o.ValueNumber+'" style="font-weight:bold;">'+o.Name+g+slT1+'" id="'+o.Name+'L"><span class="slTimeText"> <span class="hAmount">'+d+'</span><span>:</span><span class="mAmount">'+c+"</span><span>-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span> </span></div>"+g+slT2+'" id="'+o.Name+'R"><span class="slTimeText"> <span class="hAmount">'+m+'</span><span>:</span><span class="mAmount">'+v+"</span></span></div></div>"}else wasUsed=!1}if(["dButtons","vInput","tSlider","vSlider"].some(t=>e.TaskName.includes(t))&&(o.Name.includes("noValAuto")?window.innerWidth>=450&&(html+='<div class="sensorset"><div></div><div</div></div>'):o.Name.includes("noVal")&&(html+='<div class="sensorset"><div>&nbsp;</div><div</div></div>'),wasUsed=!0),e.TaskName.includes("bigVal")){let p='<div class="valuesBig" style="font-weight:bold;text-align:left;">';!0==firstItem&&(i+='<div class="bigNum">',bigLength<e.TaskValues.length&&(bigLength=e.TaskValues.length)),o.Name.includes("XX")||(e.TaskName.includes("bigValC")?3!==e.TaskValues.length||e.TaskValues.some(e=>"XX"===e.Name)?i+='<div class="bigNumWrap bigC">':i+='<div class="bigNumWrap bigC bigSpan">':3!==e.TaskValues.length||e.TaskValues.some(e=>"XX"===e.Name)?i+='<div class="bigNumWrap">':i+='<div class="bigNumWrap bigSpan">',["Clock","Uhr","Zeit","Time"].some(e=>o.Name.includes(e))?i+=p+o.Name+'</div><div id="clock" class="valueBig">'+a+"</div></div>":o.Name.toLowerCase().includes("datum")?i+=p+o.Name+'</div><div id="date" class="valueBig">'+dateD+"."+dateM.toString()+"</div></div>":o.Name.toLowerCase().includes("date")?i+=p+o.Name+'</div><div id="date" class="valueBig">'+dateM+"-"+dateD.toString()+"</div></div>":["year","jahr"].some(e=>o.Name.toLowerCase().includes(e))?i+=p+o.Name+'</div><div id="year" class="valueBig">'+dateY+"</div></div>":o.Name.includes("noVal")?i+=p+'</div><div class="valueBig"></span></div></div>':isTspeak?i+=p+itemN+'</div><div id="'+itemN+'TS" class="valueBig">'+itemTSName+'<span style="background:none;padding-right: 1%;">'+kindN+"</span></div></div>":i+=p+itemN+'</div><div class="valueBig">'+num2Value+'<span style="background:none;padding-right: 1%;">'+kindN+"</span></div></div>"),wasUsed=!0}wasUsed||(!0==firstItem&&(html+='<div class="'+s+"buttonClick('"+utton+"')\">"+l),isTspeak?html+='<div class="values thingspeak"><div>'+itemN+'</div><div id="'+itemN+'TS">'+itemTSName+kindN+"</div></div>":o.Name.includes("noVal")?html+='<div class="values therest"><div>&nbsp;</div><div></div></div>':81==e.TaskDeviceNumber?html+='<div class="cron"><div>'+itemN+'</div><div style="font-size: 10pt;">'+o.Value+"</div></div>":html+='<div class="values therest"><div>'+itemN+"</div><div>"+num2Value+kindN+"</div></div>"),firstItem=!1}),html+="</div>",i+="</div>")}),someoneEn||hasParams||(html+='<div class="sensorset clickables" onclick="splitOn(); topF()"> <div class="sensors" style="font-weight:bold;">no tasks enabled or visible...</div>')):html+='<div class="sensorset clickables"><div  class="sensors" style="font-weight:bold;">no tasks configured...</div>',document.getElementById("sysInfo").innerHTML=s,document.getElementById("sensorList").innerHTML=html,document.getElementById("sliderList").innerHTML=n,document.getElementById("bigNumber").innerHTML=i,firstRun&&(userAgent.match(/iPhone/i)&&(document.body.style.height="101vh"),setInterval(fetchJson,2e3),setInterval(getTS,1e4),getTS(),getNodes(),unitNr1=myJson.System["Unit Number"],nodePath2="http://"+myJson.WiFi["IP Address"]+"/devices",nodePath="http://"+myJson.WiFi["IP Address"]+"/tools",firstRun=!1),styleU=unitNr===unitNr1?"&#8858;":"",document.getElementById("unitId").innerHTML=styleU+unit+'<span class="numberUnit"> ('+myJson.WiFi.RSSI+")</span>",document.getElementById("unitT").innerHTML=styleU+unit,paramS(),changeCss(),resizeText(),longPressB(),longPressN(),e&&(dataT2=[],getTS())}}async function getTS(){if(dataT)for(Array of dataT)myTS=await (responseTS=await fetch("https://api.thingspeak.com/channels/"+Array[0]+"/fields/"+Array[1]+"/last")).json(),responseTS.ok?dataT2[Array[3]]=myTS.toFixed(Array[2]):dataT2.push("error")}function getUrl(e){fetch(e)}function changeCss(){var e,t,s=document.querySelectorAll("input[type=range]").length;s?document.getElementById("allList").classList.remove("allExtra"):document.getElementById("allList").classList.add("allExtra");var n=document.querySelectorAll(".bigNum"),i=document.getElementsByClassName("bigNum").length;document.getElementsByClassName("valuesBig").length;var l=document.getElementById("sensorList").getElementsByClassName("sensorset").length;if(1===bigLength||!i&&l<2){if(document.getElementById("sensorList").classList.add("sensorL1"),document.getElementById("sensorList").classList.remove("sensorL2","sensorL3","sensorL4"),n.length)for(var a=0;a<n.length;++a)n[a].classList.add("bigNumOne");coloumnSet=1}else 2===bigLength||!i&&l<5&&l>1?(document.getElementById("sensorList").classList.remove("sensorL1","sensorL3","sensorL4"),document.getElementById("sensorList").classList.add("sensorL2"),coloumnSet=2):3===bigLength||!i&&l<10&&l>4?(document.getElementById("sensorList").classList.remove("sensorL1","sensorL2","sensorL4"),document.getElementById("sensorList").classList.add("sensorL3"),coloumnSet=3):4===bigLength||!i&&l>9?(document.getElementById("sensorList").classList.remove("sensorL1","sensorL2","sensorL3"),document.getElementById("sensorList").classList.add("sensorL4"),coloumnSet=4):(document.getElementById("sensorList").classList.remove("sensorL1","sensorL3","sensorL4"),document.getElementById("sensorList").classList.add("sensorL2"),coloumnSet=2);if(bigLength>1&&n.length)for(var a=0;a<n.length;++a)n[a].classList.remove("bigNumOne");if(window.innerWidth<450&&(coloumnSet=(1!==bigLength||i)&&(0!==bigLength||1!==l)?2:1),l%coloumnSet!=0){calcTile=coloumnSet-(l-coloumnSet*Math.floor(l/coloumnSet));for(let o=1;o<=calcTile;o++)html+='<div class="sensorset"><div>&nbsp;</div><div</div></div>'}if(document.getElementById("sensorList").innerHTML=html,s&&bigLength<3&&l<5){e=document.querySelectorAll(".slTS"),t=document.querySelectorAll(".slider");for(var a=0;a<e.length;++a)e[a].classList.add("slTSsmall");for(var a=0;a<t.length;++a)t[a].classList.add("slidersmall")}else{e=document.querySelectorAll(".slTS"),t=document.querySelectorAll(".slider");for(var a=0;a<e.length;++a)e[a].classList.remove("slTSsmall");for(var a=0;a<t.length;++a)t[a].classList.remove("slidersmall")}bigLength=0}function paramS(){var e=document.querySelectorAll(".slTS");e.forEach(e=>{e.addEventListener("input",updateSlTS),e.addEventListener("change",sliderChTS)});var e=document.querySelectorAll(".slider");e.forEach(e=>{e.addEventListener("input",updateSlider),e.addEventListener("change",sliderChange)})}function updateSlTS(e){isittime=0,slider=e.target;let t=slider.closest(".slTimeSet").querySelector(".hAmount"),s=slider.closest(".slTimeSet").querySelector(".mAmount");var n=Math.floor(slider.value/60),i=slider.value%60;let l=i.toString().padStart(2,"0");t.textContent=n,s.textContent=l}function updateSlider(e){NrofSlides++,isittime=0,currVal=(slider=e.target).attributes.value.nodeValue;let t=slider.closest("div.sensorset").querySelector(".sliderAmount");(slKind=slider.id.split("?")[4])||(slKind=""),"H"==slKind&&(slKind="%"),slider.className.includes("noVal")||(sliderAmount=Number(e.target.value).toFixed(void 0!==e.target.step.split(".")[1]&&e.target.step.split(".")[1].length)+slKind,t.textContent=sliderAmount)}function sliderChTS(e){slider=e.target;let t=slider.parentNode.parentNode;if(slider.id==t.id+"L")var s=document.getElementById(t.id+"R");else var s=document.getElementById(t.id+"L");unitNr===unitNr1?(slider.id==t.id+"L"?getUrl("control?cmd=taskvalueset,"+t.classList[2]+","+e.target.value+"."+s.value.toString().padStart(4,"0")):getUrl("control?cmd=taskvalueset,"+t.classList[2]+","+s.value+"."+e.target.value.toString().padStart(4,"0")),getUrl("control?cmd=event,"+t.classList[1]+"Event="+t.classList[2].split(",")[1])):(slider.id==t.id+"L"?getUrl("control?cmd=SendTo,"+nodeNr+',"taskvalueset,'+t.classList[2]+","+e.target.value+"."+s.value.toString().padStart(4,"0")+'"'):getUrl("control?cmd=SendTo,"+nodeNr+',"taskvalueset,'+t.classList[2]+","+s.value+"."+e.target.value.toString().padStart(4,"0")+'"'),getUrl("control?cmd=SendTo,"+nodeNr+',"event,'+t.classList[1]+"Event="+t.classList[2].split(",")[1]+'"')),isittime=1,setTimeout(fetchJson,400)}function sliderChange(e){maxVal=(slider=e.target).attributes.max.nodeValue,minVal=slider.attributes.min.nodeValue,OnOff="",parseFloat(e.target.value).toFixed(void 0!==e.target.step.split(".")[1]&&e.target.step.split(".")[1].length),sliderAmount=e.target.value,1==NrofSlides&&(sliderAmount>5*maxVal/6&&currVal!==maxVal&&(sliderAmount=maxVal,OnOff=",1"),sliderAmount<maxVal/6&&currVal!==minVal&&(sliderAmount=minVal,OnOff=",0")),sliderId=(slider.id.match(/\?/g)||[]).length>=3?slider.id.split("?")[0]:slider.id,unitNr===unitNr1?(fetch("control?cmd=taskvalueset,"+slider.classList[1]+","+sliderAmount),fetch("control?cmd=event,"+sliderId+"Event="+sliderAmount+OnOff)):(fetch("control?cmd=SendTo,"+nodeNr+',"taskvalueset,'+slider.classList[1]+","+sliderAmount+'"'),fetch("control?cmd=SendTo,"+nodeNr+',"event,'+sliderId+"Event="+sliderAmount+OnOff+'"')),isittime=1,NrofSlides=0,setTimeout(fetchJson,400)}function buttonClick(e,t){e.split("&")[1]&&(utton2=e.split("&")[0],fetch("control?cmd=SendTo,"+(nodeNr2=e.split("&")[1])+',"event,'+utton2+'Event"')),e.split("?")[1]?(gpioNr=e.split("?")[1],gS=1==t?0:1,unitNr===unitNr1?getUrl("control?cmd=gpio,"+gpioNr+","+gS):fetch("control?cmd=SendTo,"+nodeNr+',"gpio,'+gpioNr+","+gS+'"')):unitNr===unitNr1?getUrl("control?cmd=event,"+e+"Event"):fetch("control?cmd=SendTo,"+nodeNr+',"event,'+e+'Event"'),setTimeout(fetchJson,400)}function getInput(e,t){"click"===event.type&&(isittime=0,InputInterV=setTimeout(blurInput,8e3),e.addEventListener("blur",e=>{clearTimeout(InputInterV),isittime=1,setTimeout(fetchJson,400)})),e.value.length>12&&(e.value=e.value.slice(0,12)),"Enter"!==event.key&&("click"!==event.type||t)?"Escape"===event.key?document.getElementById(e.id).value="":(clearTimeout(InputInterV),InputInterV=setTimeout(blurInput,5e3)):(e.value?(unitNr===unitNr1?getUrl("control?cmd=taskvalueset,"+e.classList[1]+","+e.value):fetch("control?cmd=SendTo,"+nodeNr+',"taskvalueset,'+e.classList[1]+","+e.value+'"'),buttonClick(e.id)):setTimeout(fetchJson,400),clearTimeout(InputInterV),isittime=1)}function blurInput(){isittime=1}function openNav(){nodeInterV&&clearInterval(nodeInterV),nodeInterV=setInterval(getNodes,1e4),0===document.getElementById("mySidenav").offsetWidth?(document.getElementById("mySidenav").style.width="280px",document.getElementById("menueList").style.color="white",document.getElementById("sysInfo").style.opacity="1"):closeNav()}function closeNav(){clearInterval(nodeInterV),document.getElementById("mySidenav").style.width="0",document.getElementById("menueList").style.color="transparent",document.getElementById("sysInfo").style.opacity="0"}function openSys(){0===document.getElementById("sysInfo").offsetHeight?(document.getElementById("menueWrap1").style.flexShrink="0",document.getElementById("sysInfo").style.height="180px"):(document.getElementById("sysInfo").style.height="0",document.getElementById("menueWrap1").style.flexShrink="999")}async function getNodes(e){myJson=await (response=await fetch("json")).json();let t="";nodeInfos=myJson.nodes;let s=-1;if(myJson.nodes.forEach(n=>{s++,n.nr==myParam&&hasParams&&(nodeChange(s),hasParams=!1),t+='<div class="menueItem"><div class="serverUnit" style="text-align: center;">'+(styleN=n.nr===unitNr1?n.nr===unitNr?"&#8857;&#xFE0E;":"&#8858;&#xFE0E;":n.nr===unitNr?"&#183;&#xFE0E;":"")+'</div><div id="'+n.name+'" class="nc" onclick="getNodes(); sendUpdate(); nodeChange('+s+');iFr();">'+n.name+'<span class="numberUnit">'+n.nr+"</span></div></div>",(e||isLongNode)&&(isLongNode?n.nr===unitNr1?getUrl("control?cmd=event,"+lutton+"Long"):getUrl("/control?cmd=SendTo,"+n.nr+',"event,'+lutton+'Long"'):n.nr===unitNr1?getUrl("control?cmd=event,"+e+"Event"):getUrl("/control?cmd=SendTo,"+n.nr+',"event,'+e+'Event"'))}),s=0,document.getElementById("menueList").innerHTML=t,isLongNode=0,hasParams){let n='<div class="'+htmlStatic1+'"><div  class="sensors" style="font-weight:bold;">can not find node # '+myParam+"...</div>";document.getElementById("sensorList").innerHTML=n,changeCss(),hasParams=!1,setTimeout(fetchJson,3e3)}else nodeInterV||setTimeout(fetchJson,100)}function sendUpdate(){setTimeout(getNodes,400)}function nodeChange(e){(nodeInfos=nodeInfos[e])&&(nodeNr=nodeInfos.nr,nodePath=`http://${nodeInfos.ip}/tools`,nodePath2=`http://${nodeInfos.ip}/devices`,jsonPath=`http://${nodeInfos.ip}/json`,window.history.replaceState(null,null,"?unit="+nodeNr),fetchJson(1)),window.innerWidth<1023&&0===document.getElementById("sysInfo").offsetHeight&&closeNav()}function resizeText(){let e=({clientWidth:e,clientHeight:t,scrollWidth:s,scrollHeight:n})=>s>e||n>t;(({element:t,elements:s,minSize:n=10,maxSize:i=115,step:l=1,unit:a="pt"})=>{(s||[t]).forEach(t=>{let s=n,o=!1,d=t.parentNode;for(;!o&&s<i;)t.style.fontSize=`${s}${a}`,(o=e(d))||(s+=l);t.style.fontSize=`${s-l}${a}`,t.style.lineHeight="0.75"})})({elements:document.querySelectorAll(".valueBig"),step:1})}function launchFs(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function splitOn(){0===document.getElementById("framie").offsetWidth?(iFr(isOpen=1),document.getElementById("framie").style.width="100%"):(document.getElementById("framie").style.width="0",document.getElementById("framie").innerHTML="",isOpen=0),setTimeout(fetchJson,100)}function iFr(){1===isOpen&&(document.getElementById("framie").innerHTML='<iframe src="'+nodePath2+'"></iframe>',closeNav())}function topF(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function longPressN(){document.getElementById("mOpen").addEventListener("long-press",function(e){window.location.href=nodePath})}function longPressB(){var e=!1;let t=document.querySelectorAll(".sensorset");t.forEach(t=>{t.addEventListener("long-press",function(s){let n=t.querySelector(".sensors"),i=t.querySelector(".nodes");i?(lutton=i.textContent,isLongNode=1,getNodes()):n.id.split("&")[1]?(utton2=n.id.split("&")[0],fetch("control?cmd=SendTo,"+(nodeNr2=n.id.split("&")[1])+',"event,'+utton2+'Long"'),isittime=1,setTimeout(fetchJson,400)):(unitNr!==unitNr1||e?getUrl("control?cmd=SendTo,"+nodeNr+',"event,'+n.textContent+'Long"',!0):(getUrl("control?cmd=event,"+n.textContent+"Long"),e=!0),isittime=1,setTimeout(fetchJson,400))})})}function minutesToDhm(e){var t=Math.floor(e/1440),s=Math.floor(e%1440/60),n=Math.floor(e%60);return(t>0?t+(1==t?" day ":" days "):"")+(s>0?s+(1==s?" hour ":" hours "):"")+(n>0?n+(1==n?" minute ":" minutes "):"")}!function(e,t){"use strict";var s=null,n="PointerEvent"in e||e.navigator&&"msPointerEnabled"in e.navigator,i="ontouchstart"in e||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,l=0,a=0;function o(e){var s;d(),e=void 0!==(s=e).changedTouches?s.changedTouches[0]:s,this.dispatchEvent(new CustomEvent("long-press",{bubbles:!0,cancelable:!0,detail:{clientX:e.clientX,clientY:e.clientY},clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}))||t.addEventListener("click",function e(s){var n;t.removeEventListener("click",e,!0),(n=s).stopImmediatePropagation(),n.preventDefault(),n.stopPropagation()},!0)}function d(t){var n;(n=s)&&(e.cancelAnimationFrame?e.cancelAnimationFrame(n.value):e.webkitCancelAnimationFrame?e.webkitCancelAnimationFrame(n.value):e.webkitCancelRequestAnimationFrame?e.webkitCancelRequestAnimationFrame(n.value):e.mozCancelRequestAnimationFrame?e.mozCancelRequestAnimationFrame(n.value):e.oCancelRequestAnimationFrame?e.oCancelRequestAnimationFrame(n.value):e.msCancelRequestAnimationFrame?e.msCancelRequestAnimationFrame(n.value):clearTimeout(n)),s=null}"function"!=typeof e.CustomEvent&&(e.CustomEvent=function(e,s){s=s||{bubbles:!1,cancelable:!1,detail:void 0};var n=t.createEvent("CustomEvent");return n.initCustomEvent(e,s.bubbles,s.cancelable,s.detail),n},e.CustomEvent.prototype=e.Event.prototype),e.requestAnimFrame=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},t.addEventListener(n?"pointerup":i?"touchend":"mouseup",d,!0),t.addEventListener(n?"pointermove":i?"touchmove":"mousemove",function(e){var t=Math.abs(l-e.clientX),s=Math.abs(a-e.clientY);(t>=10||s>=10)&&d()},!0),t.addEventListener("wheel",d,!0),t.addEventListener("scroll",d,!0),t.addEventListener(n?"pointerdown":i?"touchstart":"mousedown",function(n){var i,r,c;l=n.clientX,a=n.clientY,d(i=n),c=parseInt(function(e,s,n){for(;e&&e!==t.documentElement;){var i=e.getAttribute(s);if(i)return i;e=e.parentNode}return"600"}(r=i.target,"data-long-press-delay","600"),10),s=function(t,s){if(!(e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame&&e.mozCancelRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame))return e.setTimeout(t,s);var n=(new Date).getTime(),i={},l=function(){(new Date).getTime()-n>=s?t.call():i.value=requestAnimFrame(l)};return i.value=requestAnimFrame(l),i}(o.bind(r,i),c)},!0)}(window,document);
    </script>

<div id="container">
    <div id="framie"></div>
    <div id="mySidenav" class="sidenav">
        <div id="sysInfo">no info found...</div>
        <div class="menueWrap" id="menueWrap1"></div>
        <div id="menueList"></div>
        <div class="menueWrap" id="menueWrap2"></div>
            <div class="sideNbtn openSys" onclick="openSys(event)">&#8505;&#xFE0E;</div>
            <div href="javascript:void(0)" class="sideNbtn closeBtn" onclick="closeNav()">&times;&#xFE0E;</div>
    </div>
    <div id="unitId" style="cursor: pointer;" onclick="launchFs(document.documentElement)">&nbsp;</div>
    <div id="allList">
        <div id="bigNumber">&nbsp;</div>
        <div id="sliderList">&nbsp;</div>
        <div id="sensorList">&nbsp;</div>
    </div>
    <div id="opener">
        <div class="open">
            <span style="font-size:30px;cursor:pointer;background:none;"
                onclick="openNav(event); getNodes()">&#9776;&#xFE0E;</span>
            <span id="mOpen" style="font-size:30px;cursor:pointer;background:none;"
                onclick="splitOn(); topF()">&#8962;&#xFE0E;</span>
        </div>
    </div>
</div>
</body>

</html>